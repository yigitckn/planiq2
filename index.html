<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PlanIQ - AkÄ±llÄ± GÃ¼nlÃ¼k PlanlayÄ±cÄ±</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes fadeIn {
            0% { opacity: 0; }
            100% { opacity: 1; }
        }
        @keyframes slideUp {
            0% { transform: translateY(20px); opacity: 0; }
            100% { transform: translateY(0); opacity: 1; }
        }
        @keyframes bounce {
            0%, 20%, 53%, 80%, 100% { transform: translate3d(0,0,0); }
            40%, 43% { transform: translate3d(0, -30px, 0); }
            70% { transform: translate3d(0, -15px, 0); }
            90% { transform: translate3d(0, -4px, 0); }
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .animate-fadeIn { animation: fadeIn 0.2s ease-out; }
        .animate-slideUp { animation: slideUp 0.5s ease-out; }
        .animate-bounce { animation: bounce 1.5s ease-in-out infinite; }
        .animate-pulse { animation: pulse 2s ease-in-out infinite; }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useRef, useEffect } = React;
        
        // Firebase Config
        const firebaseConfig = {
            apiKey: "AIzaSyARs7TFmAOSq88lTgYSlUJjGoQP_rt9SwA",
            authDomain: "planiq-170ca.firebaseapp.com",
            projectId: "planiq-170ca",
            storageBucket: "planiq-170ca.firebasestorage.app",
            messagingSenderId: "110643251007",
            appId: "1:110643251007:web:28d01c098db5f74280358a",
            measurementId: "G-VZJR3XE0XT"
        };
        
        // Initialize Firebase
        const app = firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const auth = firebase.auth();
        
        // Helper Functions
        const formatDateKey = (date) => {
            if (!(date instanceof Date) || isNaN(date)) {
                return new Date().toISOString().split('T')[0];
            }
            return date.toISOString().split('T')[0];
        };
        
        const formatFullDate = (date) => {
            if (!(date instanceof Date) || isNaN(date)) {
                date = new Date();
            }
            return new Intl.DateTimeFormat('tr-TR', { day: 'numeric', month: 'long', weekday: 'long' }).format(date);
        };
        
        const formatDisplayDate = (date) => {
            if (!(date instanceof Date) || isNaN(date)) {
                date = new Date();
            }
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            const tomorrow = new Date(today);
            tomorrow.setDate(today.getDate() + 1);
            const yesterday = new Date(today);
            yesterday.setDate(today.getDate() - 1);
            
            const targetDate = new Date(date);
            targetDate.setHours(0, 0, 0, 0);
            
            if (targetDate.getTime() === today.getTime()) return "BugÃ¼n";
            if (targetDate.getTime() === tomorrow.getTime()) return "YarÄ±n";
            if (targetDate.getTime() === yesterday.getTime()) return "DÃ¼n";
            
            const day = String(targetDate.getDate()).padStart(2, '0');
            const month = String(targetDate.getMonth() + 1).padStart(2, '0');
            return `${day}/${month}`;
        };
        
        const parseTime = (timeString) => {
            if (!timeString || !timeString.includes(':')) return null;
            const [hours, minutes] = timeString.split(':').map(Number);
            if (isNaN(hours) || isNaN(minutes)) return null;
            return { hours, minutes };
        };
        
        const isTimeLaterOrEqual = (time1, time2) => {
            const t1 = parseTime(time1);
            const t2 = parseTime(time2);
            if (!t1 || !t2) return false;
            if (t1.hours > t2.hours) return true;
            if (t1.hours === t2.hours && t1.minutes >= t2.minutes) return true;
            return false;
        };
        
        const addMinutesToTime = (timeString, minutesToAdd) => {
            const time = parseTime(timeString);
            if (!time) return timeString;
            
            let totalMinutes = time.hours * 60 + time.minutes + minutesToAdd;
            totalMinutes = (totalMinutes + 1440) % 1440;
            
            const newHours = Math.floor(totalMinutes / 60);
            const newMinutes = totalMinutes % 60;
            
            return `${String(newHours).padStart(2, '0')}:${String(newMinutes).padStart(2, '0')}`;
        };
        
        // Splash Screen Component
        const SplashScreen = () => {
            return React.createElement('div', {
                className: "fixed inset-0 bg-gradient-to-br from-purple-600 via-purple-500 to-pink-500 flex items-center justify-center z-50 overflow-hidden"
            }, [
                React.createElement('div', {
                    key: 'bubbles',
                    className: "absolute top-1/4 left-1/4 w-48 h-48 bg-white/10 rounded-full filter blur-3xl animate-pulse"
                }),
                React.createElement('div', {
                    key: 'bubbles2',
                    className: "absolute bottom-1/4 right-1/4 w-32 h-32 bg-white/10 rounded-full filter blur-3xl animate-pulse"
                }),
                React.createElement('div', {
                    key: 'content',
                    className: "text-center animate-fadeIn relative z-10"
                }, [
                    React.createElement('div', {
                        key: 'logo',
                        className: "mb-6 animate-bounce"
                    }, React.createElement('div', {
                        className: "w-32 h-32 bg-white rounded-3xl shadow-2xl flex items-center justify-center mx-auto transform transition-transform duration-500 hover:scale-110"
                    }, React.createElement('div', {
                        className: "w-20 h-20 text-purple-600 animate-pulse"
                    }, 'ğŸ§ '))),
                    React.createElement('h1', {
                        key: 'title',
                        className: "text-6xl font-bold text-white mb-4 animate-slideUp"
                    }, [
                        'Plan',
                        React.createElement('span', {
                            key: 'iq',
                            className: "text-yellow-300"
                        }, 'IQ')
                    ]),
                    React.createElement('p', {
                        key: 'subtitle',
                        className: "text-white/90 text-xl animate-slideUp"
                    }, 'AkÄ±llÄ± GÃ¼nlÃ¼k PlanlayÄ±cÄ±n')
                ])
            ]);
        };
        
        // DailyPlanCard Component
        const DailyPlanCard = ({ day, userData, selectedDateKey, userId, isDark }) => {
            const [tasks, setTasks] = useState([]);
            const [isLoadingTasks, setIsLoadingTasks] = useState(true);
            const [isAddingTask, setIsAddingTask] = useState(false);
            const [newTask, setNewTask] = useState({ time: '', name: '' });
            const [modalTask, setModalTask] = useState(null);
            const [modalContentStage, setModalContentStage] = useState('initial');
            const [aiSuggestionContent, setAiSuggestionContent] = useState(null);
            
            // GerÃ§ek AI tarif Ã¶neri fonksiyonu
            const generateRecipeSuggestions = async (mealType, cuisine, userCuisines) => {
                try {
                    // AI iÃ§in tarif Ã¶nerisi
                    const generateAIRecipe = async (prompt) => {
                        try {
                            // Gemini AI API - Google Search ile gerÃ§ek tarifler
                            console.log('Gemini AI + Google Search tarif Ã¶nerileri Ã§alÄ±ÅŸÄ±yor...');
                            
                            const geminiResponse = await fetch('https://cors-anywhere.herokuapp.com/https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent?key=' + (localStorage.getItem('gemini_api_key') || 'AIzaSyBJ40egBrIod7g6rd2h0IjCveDLlHpD4ss'), {
                                method: 'POST',
                                headers: {
                                    'Content-Type': 'application/json',
                                    'X-Requested-With': 'XMLHttpRequest',
                                },
                                body: JSON.stringify({
                                    contents: [{
                                        parts: [{
                                            text: prompt
                                        }]
                                    }],
                                    tools: [{ "google_search": {} }], // Google Search aracÄ±
                                    generationConfig: {
                                        temperature: 0.7,
                                        topK: 40,
                                        topP: 0.95,
                                        maxOutputTokens: 500,
                                    }
                                })
                            });

                            if (geminiResponse.ok) {
                                const data = await geminiResponse.json();
                                console.log('Gemini API Response:', data);
                                
                                if (data.candidates && data.candidates[0] && data.candidates[0].content && data.candidates[0].content.parts) {
                                    const result = data.candidates[0].content.parts[0].text;
                                    console.log('Gemini AI Success:', result);
                                    return result;
                                }
                            } else {
                                console.log('Gemini API Error:', geminiResponse.status, await geminiResponse.text());
                            }
                        } catch (error) {
                            console.log('Gemini AI failed:', error);
                        }

                        // Fallback: Mock AI (API Ã§alÄ±ÅŸmazsa)
                        console.log('Fallback Mock AI tarif Ã¶nerileri Ã§alÄ±ÅŸÄ±yor...');
                        
                        // Ã–ÄŸÃ¼n tipini Ã§Ä±kar - daha kesin kontrol
                        let mealType = 'kahvaltÄ±'; // varsayÄ±lan
                        if (prompt.includes('Ã¶ÄŸle yemeÄŸi') || prompt.includes('Ã¶ÄŸle')) {
                            mealType = 'Ã¶ÄŸle yemeÄŸi';
                        } else if (prompt.includes('akÅŸam yemeÄŸi') || prompt.includes('akÅŸam')) {
                            mealType = 'akÅŸam yemeÄŸi';
                        } else if (prompt.includes('kahvaltÄ±')) {
                            mealType = 'kahvaltÄ±';
                        }
                        
                        console.log('AlgÄ±lanan Ã¶ÄŸÃ¼n tipi:', mealType);
                        
                        // Mutfak tipini Ã§Ä±kar
                        const cuisine = prompt.includes('TÃ¼rk') ? 'TÃ¼rk' : 
                                      prompt.includes('Ä°talyan') ? 'Ä°talyan' : 
                                      prompt.includes('Uzak DoÄŸu') ? 'Uzak DoÄŸu' : 'genel';
                        
                        // GerÃ§ekÃ§i tarif Ã¶nerileri oluÅŸtur - kÄ±sa ve Ã¶z
                        const mockRecipes = {
                            'kahvaltÄ±': [
                                `Menemen:\nTaze domates, biber ve yumurta ile hazÄ±rlanan TÃ¼rk kahvaltÄ±sÄ±nÄ±n vazgeÃ§ilmez lezzeti. 15 dakikada hazÄ±r.`,
                                `Omlet:\nKlasik yumurta yemeÄŸi, taze otlar ve peynirle zenginleÅŸtirilmiÅŸ. 10 dakikada hazÄ±r.`,
                                `Serpme KahvaltÄ±:\nPeynir, zeytin, domates, salatalÄ±k ve reÃ§el ile hazÄ±rlanan geleneksel TÃ¼rk kahvaltÄ±sÄ±.`,
                                `Avokado Tost:\nTaze avokado, limon ve tuz ile hazÄ±rlanan modern kahvaltÄ±. 5 dakikada hazÄ±r.`,
                                `Yulaf Ezmesi:\nSÃ¼t ile piÅŸirilen yulaf, taze meyveler ve bal ile tatlandÄ±rÄ±lmÄ±ÅŸ. 10 dakikada hazÄ±r.`
                            ],
                            'Ã¶ÄŸle yemeÄŸi': [
                                `Kebap:\nGeleneksel TÃ¼rk kebap Ã§eÅŸitleri, taze et ve baharatlarla hazÄ±rlanan. 30 dakikada hazÄ±r.`,
                                `MantÄ±:\nHamur iÃ§i et ile doldurulmuÅŸ, yoÄŸurt sosu ile servis edilen. 45 dakikada hazÄ±r.`,
                                `Lahmacun:\nÄ°nce hamur Ã¼zerine kÄ±yma, domates ve baharatlarla hazÄ±rlanan. 25 dakikada hazÄ±r.`,
                                `Ã‡orba:\nSÄ±cak ve besleyici Ã§orba Ã§eÅŸitleri. 20 dakikada hazÄ±r.`,
                                `Salata:\nTaze yeÅŸillikler, sebzeler ve protein kaynaklarÄ± ile hazÄ±rlanan. 15 dakikada hazÄ±r.`,
                                `SandviÃ§:\nEkmek arasÄ± taze malzemelerle hazÄ±rlanan pratik yemek. 10 dakikada hazÄ±r.`
                            ],
                            'akÅŸam yemeÄŸi': [
                                `Kuzu TandÄ±r:\nUzun sÃ¼re piÅŸirilen kuzu eti, geleneksel TÃ¼rk mutfaÄŸÄ±nÄ±n Ã¶zel lezzeti. 2 saatte hazÄ±r.`,
                                `BalÄ±k:\nTaze balÄ±k Ã§eÅŸitleri, zeytinyaÄŸÄ± ve limon ile hazÄ±rlanan. 30 dakikada hazÄ±r.`,
                                `Pasta:\nMakarna Ã§eÅŸitleri, Ã§eÅŸitli soslarla hazÄ±rlanan doyurucu yemek. 25 dakikada hazÄ±r.`,
                                `Et YemeÄŸi:\nTavuk, dana veya kuzu eti ile hazÄ±rlanan protein aÃ§Ä±sÄ±ndan zengin yemek. 45 dakikada hazÄ±r.`,
                                `Sebze YemeÄŸi:\nTaze sebzelerle hazÄ±rlanan hafif ve saÄŸlÄ±klÄ± yemek. 20 dakikada hazÄ±r.`,
                                `Pilav:\nPirinÃ§ pilavÄ±, et suyu ile hazÄ±rlanan geleneksel yan yemek. 30 dakikada hazÄ±r.`
                            ]
                        };
                        
                        // Rastgele 3-4 tarif seÃ§
                        const recipes = mockRecipes[mealType] || mockRecipes['kahvaltÄ±'];
                        const selectedRecipes = recipes.sort(() => 0.5 - Math.random()).slice(0, 3);
                        
                        // AI yanÄ±tÄ± formatÄ±nda dÃ¶ndÃ¼r
                        return selectedRecipes.join('\n\n');
                    };
                    
                    // AI iÃ§in prompt oluÅŸtur
                    const cuisineText = userCuisines && userCuisines.length > 0 
                        ? `KullanÄ±cÄ±nÄ±n sevdiÄŸi mutfaklar: ${userCuisines.join(', ')}` 
                        : 'Genel mutfak';
                    
                    const mealTypeTurkish = {
                        'kahvaltÄ±': 'kahvaltÄ±',
                        'Ã¶ÄŸle yemeÄŸi': 'Ã¶ÄŸle yemeÄŸi', 
                        'akÅŸam yemeÄŸi': 'akÅŸam yemeÄŸi'
                    };
                    
                    const currentMealType = mealTypeTurkish[mealType] || mealType;
                    
                    const aiPrompt = `${currentMealType} iÃ§in ${cuisineText} tarifleri Ã¶ner. 
                    LÃ¼tfen 2-3 farklÄ± lezzetli tarif Ã¶ner, her birinin adÄ±nÄ± ve detaylÄ± aÃ§Ä±klamasÄ±nÄ± ver. 
                    Format: 
                    "Tarif AdÄ±:
                    AÃ§Ä±klama: [Tarifin malzemelerini, hazÄ±rlanÄ±ÅŸÄ±nÄ±, Ã¶zelliklerini detaylÄ±ca anlat]"
                    
                    Ã–rnek:
                    "Menemen:
                    AÃ§Ä±klama: Domates, biber ve yumurta ile hazÄ±rlanan, TÃ¼rk kahvaltÄ±larÄ±nÄ±n vazgeÃ§ilmez lezzeti. Taze domates ve biberlerin kavrulmasÄ±yla hazÄ±rlanan bu pratik yemek, doyurucu ve besleyicidir."
                    
                    Sadece tarif isimlerini ve aÃ§Ä±klamalarÄ±nÄ± ver, baÅŸka aÃ§Ä±klama yapma.`;
                    
                    // AI'dan tarif al
                    const aiResponse = await generateAIRecipe(aiPrompt);
                    
                    if (aiResponse) {
                        // AI yanÄ±tÄ±nÄ± parse et - tarif adÄ± ve aÃ§Ä±klama formatÄ±nda
                        const lines = aiResponse.split('\n').filter(line => line.trim());
                        const suggestions = [];
                        let currentRecipe = null;
                        
                        for (let i = 0; i < lines.length; i++) {
                            const line = lines[i].trim();
                            
                            // Tarif adÄ± (AÃ§Ä±klama: ile bitmeyen satÄ±rlar)
                            if (line && !line.startsWith('AÃ§Ä±klama:') && !line.match(/^\d+\./)) {
                                if (currentRecipe) {
                                    suggestions.push(currentRecipe);
                                }
                                currentRecipe = {
                                    name: line.replace(/^[-â€¢*]\s*/, ''),
                                    description: ''
                                };
                            }
                            // AÃ§Ä±klama
                            else if (line.startsWith('AÃ§Ä±klama:') && currentRecipe) {
                                currentRecipe.description = line.replace('AÃ§Ä±klama:', '').trim();
                            }
                        }
                        
                        // Son tarifi ekle
                        if (currentRecipe) {
                            suggestions.push(currentRecipe);
                        }
                        
                        if (suggestions.length > 0) {
                            return suggestions.map(s => `${s.name}:\n${s.description}`);
                        }
                    }
                    
                    // Fallback: Statik tarifler
                    const recipes = {
                    kahvaltÄ±: {
                        'genel': ['Omlet - Klasik Yumurta YemeÄŸi', 'Menemen - TÃ¼rk KahvaltÄ± Klasikleri', 'Yulaf Ezmesi - SaÄŸlÄ±klÄ± KahvaltÄ±'],
                        'TÃ¼rk MutfaÄŸÄ±': ['BÃ¶rek - Geleneksel TÃ¼rk BÃ¶reÄŸi', 'Pogaca - Tuzlu Hamur Ä°ÅŸi', 'Simit - Klasik TÃ¼rk Simidi'],
                        'Bulgar': ['Banitsa - Geleneksel Bulgar BÃ¶reÄŸi', 'Mekitsa - Bulgar KÄ±zartmasÄ±', 'Kashkaval - Bulgar Peyniri'],
                        'Ä°talyan': ['Frittata - Ä°talyan Omleti', 'Panettone - Ä°talyan TatlÄ±sÄ±', 'Cappuccino - Ä°talyan Kahvesi'],
                        'Uzak DoÄŸu': ['Miso Ã‡orbasÄ± - Japon KahvaltÄ±sÄ±', 'Congee - PirinÃ§ LapasÄ±', 'Dim Sum - Ã‡in KahvaltÄ±sÄ±'],
                        'Meksika': ['Huevos Rancheros - Meksika KahvaltÄ±sÄ±', 'Chilaquiles - Meksika Klasikleri', 'Breakfast Burrito - Meksika Burritosu'],
                        'Hint': ['Masala Dosa - Hint KahvaltÄ±sÄ±', 'Paratha - Hint EkmeÄŸi', 'Chai - Hint Ã‡ayÄ±']
                    },
                    'Ã¶ÄŸle yemeÄŸi': {
                        'genel': ['Salata', 'SandviÃ§', 'Ã‡orba', 'Makarna', 'Pilav'],
                        'TÃ¼rk MutfaÄŸÄ±': ['DÃ¶ner', 'Lahmacun', 'Pide', 'Mercimek Ã‡orbasÄ±'],
                        'Ä°talyan': ['Pizza', 'Risotto', 'Pasta', 'Minestrone'],
                        'Uzak DoÄŸu': ['Sushi', 'Ramen', 'Pad Thai', 'Teriyaki'],
                        'Meksika': ['Tacos', 'Burrito', 'Quesadilla', 'Enchiladas'],
                        'Hint': ['Biryani', 'Curry', 'Tandoori', 'Dal']
                    },
                    'akÅŸam yemeÄŸi': {
                        'genel': ['Izgara Et', 'BalÄ±k', 'Sebze YemeÄŸi', 'Pilav', 'Salata'],
                        'TÃ¼rk MutfaÄŸÄ±': ['Kebap', 'KarnÄ±yarÄ±k', 'MantÄ±', 'Baklava'],
                        'Ä°talyan': ['Spaghetti', 'Lasagna', 'Osso Buco', 'Tiramisu'],
                        'Uzak DoÄŸu': ['Sushi', 'Tempura', 'Stir Fry', 'Mochi'],
                        'Meksika': ['Fajitas', 'Chiles Rellenos', 'Tres Leches'],
                        'Hint': ['Butter Chicken', 'Palak Paneer', 'Naan', 'Gulab Jamun']
                    }
                };
                
                const cuisineKey = userCuisines.includes(cuisine) ? cuisine : 'genel';
                const mealRecipes = recipes[mealType] || recipes.kahvaltÄ±;
                const suggestions = mealRecipes[cuisineKey] || mealRecipes.genel;
                
                return suggestions.slice(0, 3); // Ä°lk 3 Ã¶neriyi dÃ¶ndÃ¼r
                } catch (error) {
                    console.error('Tarif Ã¶neri hatasÄ±:', error);
                    // Hata durumunda genel Ã¶neriler
                    return ['Omlet', 'Menemen', 'Yulaf Ezmesi'];
                }
            };
            
            // GerÃ§ek AI restoran Ã¶neri fonksiyonu
            const generateRestaurantSuggestions = async (mealType, city, userCuisines) => {
                console.log('generateRestaurantSuggestions Ã§aÄŸrÄ±ldÄ±:', { mealType, city, userCuisines });
                try {
                    // OpenAI API entegrasyonu iÃ§in
                    const generateAIRecommendations = async (prompt) => {
                        try {
                            // Kendi backend proxy'mizi kullan
                            console.log('Gemini AI + Google Search Ã§alÄ±ÅŸÄ±yor...');
                            
                            const geminiResponse = await fetch('/.netlify/functions/gemini-proxy', {
                                method: 'POST',
                                headers: {
                                    'Content-Type': 'application/json',
                                },
                                body: JSON.stringify({
                                    prompt: prompt,
                                    apiKey: localStorage.getItem('gemini_api_key') || 'AIzaSyBJ40egBrIod7g6rd2h0IjCveDLlHpD4ss'
                                })
                            });

                            if (geminiResponse.ok) {
                                const data = await geminiResponse.json();
                                console.log('Gemini API Response:', data);
                                
                                if (data.candidates && data.candidates[0] && data.candidates[0].content && data.candidates[0].content.parts) {
                                    const result = data.candidates[0].content.parts[0].text;
                                    console.log('Gemini AI Success:', result);
                                    return result;
                                }
                            } else {
                                console.log('Gemini API Error:', geminiResponse.status, await geminiResponse.text());
                            }
                        } catch (error) {
                            console.log('Gemini AI failed:', error);
                        }

                        // Fallback: GÃ¼Ã§lÃ¼ Mock AI (API Ã§alÄ±ÅŸmazsa)
                        console.log('Fallback Mock AI Ã§alÄ±ÅŸÄ±yor...');
                        
                        const locationMatch = prompt.match(/(\w+)\s+ÅŸehrinde/);
                        const city = locationMatch ? locationMatch[1] : 'Ä°stanbul';
                        
                        let mealType = 'kahvaltÄ±';
                        if (prompt.includes('Ã¶ÄŸle yemeÄŸi') || prompt.includes('Ã¶ÄŸle')) {
                            mealType = 'Ã¶ÄŸle yemeÄŸi';
                        } else if (prompt.includes('akÅŸam yemeÄŸi') || prompt.includes('akÅŸam')) {
                            mealType = 'akÅŸam yemeÄŸi';
                        } else if (prompt.includes('kahvaltÄ±')) {
                            mealType = 'kahvaltÄ±';
                        }
                        
                        // AkÄ±llÄ± Mock AI - KullanÄ±cÄ±nÄ±n ÅŸehrine gÃ¶re Ã¶zel Ã¶neriler
                        const generateCitySpecificRestaurants = (city, mealType) => {
                            const cityLower = city.toLowerCase();
                            
                            // Åehir bazlÄ± Ã¶zel restoran isimleri
                            const cityRestaurants = {
                                'istanbul': {
                                    'kahvaltÄ±': [
                                        `Van KahvaltÄ± Evi:\n${city} bÃ¶lgesinde geleneksel TÃ¼rk kahvaltÄ±sÄ±nÄ±n en gÃ¼zel Ã¶rneklerini sunan popÃ¼ler mekan.`,
                                        `Ã‡akÄ±r KahvaltÄ±:\n${city} bÃ¶lgesinde serpme kahvaltÄ± geleneÄŸini yaÅŸatan, doÄŸal Ã¼rÃ¼nlerle hazÄ±rlanan lezzetli mekan.`,
                                        `Mado KahvaltÄ±:\n${city} bÃ¶lgesinde modern kahvaltÄ± seÃ§enekleri sunan, geniÅŸ menÃ¼ Ã§eÅŸitliliÄŸi olan popÃ¼ler mekan.`
                                    ],
                                    'Ã¶ÄŸle yemeÄŸi': [
                                        `HacÄ± Abdullah:\n${city} bÃ¶lgesinde geleneksel TÃ¼rk mutfaÄŸÄ± sunan, Ã¶zellikle kebap Ã§eÅŸitleriyle Ã¼nlÃ¼ popÃ¼ler mekan.`,
                                        `Ã‡iya SofrasÄ±:\n${city} bÃ¶lgesinde Anadolu mutfak kÃ¼ltÃ¼rÃ¼nÃ¼ yansÄ±tan, geleneksel yemekleri modern sunumla birleÅŸtiren restoran.`,
                                        `KÃ¶fteci Ramiz:\n${city} bÃ¶lgesinde kÃ¶fte ve Ä±zgara Ã§eÅŸitleriyle Ã¼nlÃ¼, hÄ±zlÄ± servisi olan popÃ¼ler mekan.`
                                    ],
                                    'akÅŸam yemeÄŸi': [
                                        `Mikla:\n${city} bÃ¶lgesinde fine dining deneyimi sunan, ÅŸÄ±k atmosferi ve Ã¶zel akÅŸam menÃ¼leriyle Ã¼nlÃ¼ romantik restoran.`,
                                        `Neolokal:\n${city} bÃ¶lgesinde modern TÃ¼rk mutfaÄŸÄ± sunan, akÅŸam yemeÄŸi iÃ§in Ã¶zel menÃ¼leri olan ÅŸÄ±k mekan.`,
                                        `Sunset Grill & Bar:\n${city} bÃ¶lgesinde manzaralÄ±, akÅŸam yemeÄŸi iÃ§in mÃ¼kemmel atmosfer sunan lÃ¼ks restoran.`
                                    ]
                                },
                                'ankara': {
                                    'kahvaltÄ±': [
                                        `KÄ±zÄ±lay KahvaltÄ± Evi:\n${city} bÃ¶lgesinde geleneksel TÃ¼rk kahvaltÄ±sÄ± sunan, sÄ±cak atmosferi olan popÃ¼ler mekan.`,
                                        `Ã‡ankaya KahvaltÄ±:\n${city} bÃ¶lgesinde modern kahvaltÄ± seÃ§enekleri sunan, geniÅŸ menÃ¼ Ã§eÅŸitliliÄŸi olan mekan.`,
                                        `Ulus KahvaltÄ± Salonu:\n${city} bÃ¶lgesinde serpme kahvaltÄ± geleneÄŸini yaÅŸatan, doÄŸal Ã¼rÃ¼nlerle hazÄ±rlanan lezzetli mekan.`
                                    ],
                                    'Ã¶ÄŸle yemeÄŸi': [
                                        `Ankara Kebap Evi:\n${city} bÃ¶lgesinde geleneksel TÃ¼rk mutfaÄŸÄ± sunan, Ã¶zellikle kebap Ã§eÅŸitleriyle Ã¼nlÃ¼ popÃ¼ler mekan.`,
                                        `Ã‡ankaya SofrasÄ±:\n${city} bÃ¶lgesinde Anadolu mutfak kÃ¼ltÃ¼rÃ¼nÃ¼ yansÄ±tan, geleneksel yemekleri modern sunumla birleÅŸtiren restoran.`,
                                        `KÄ±zÄ±lay LokantasÄ±:\n${city} bÃ¶lgesinde ev yemekleri ve geleneksel lezzetler sunan, hÄ±zlÄ± servisi olan popÃ¼ler mekan.`
                                    ],
                                    'akÅŸam yemeÄŸi': [
                                        `Ankara Fine Dining:\n${city} bÃ¶lgesinde Ã¶zel akÅŸam menÃ¼leri ve ÅŸÄ±k atmosferi olan romantik restoran.`,
                                        `Ã‡ankaya Modern:\n${city} bÃ¶lgesinde Ã§aÄŸdaÅŸ lezzetler ve yenilikÃ§i sunumlar sunan ÅŸÄ±k mekan.`,
                                        `Ulus Geleneksel:\n${city} bÃ¶lgesinde yerel mutfaÄŸÄ±n en gÃ¼zel Ã¶rneklerini sunan otantik mekan.`
                                    ]
                                },
                                'izmir': {
                                    'kahvaltÄ±': [
                                        `Konak KahvaltÄ± Evi:\n${city} bÃ¶lgesinde Ege mutfaÄŸÄ±nÄ±n lezzetlerini sunan, deniz manzaralÄ± popÃ¼ler mekan.`,
                                        `Alsancak KahvaltÄ±:\n${city} bÃ¶lgesinde modern kahvaltÄ± seÃ§enekleri sunan, geniÅŸ menÃ¼ Ã§eÅŸitliliÄŸi olan mekan.`,
                                        `Bornova KahvaltÄ± Salonu:\n${city} bÃ¶lgesinde serpme kahvaltÄ± geleneÄŸini yaÅŸatan, doÄŸal Ã¼rÃ¼nlerle hazÄ±rlanan lezzetli mekan.`
                                    ],
                                    'Ã¶ÄŸle yemeÄŸi': [
                                        `Ä°zmir Kebap Evi:\n${city} bÃ¶lgesinde geleneksel TÃ¼rk mutfaÄŸÄ± sunan, Ã¶zellikle kebap Ã§eÅŸitleriyle Ã¼nlÃ¼ popÃ¼ler mekan.`,
                                        `Ege SofrasÄ±:\n${city} bÃ¶lgesinde Ege mutfak kÃ¼ltÃ¼rÃ¼nÃ¼ yansÄ±tan, geleneksel yemekleri modern sunumla birleÅŸtiren restoran.`,
                                        `Konak LokantasÄ±:\n${city} bÃ¶lgesinde ev yemekleri ve geleneksel lezzetler sunan, hÄ±zlÄ± servisi olan popÃ¼ler mekan.`
                                    ],
                                    'akÅŸam yemeÄŸi': [
                                        `Ä°zmir Fine Dining:\n${city} bÃ¶lgesinde Ã¶zel akÅŸam menÃ¼leri ve ÅŸÄ±k atmosferi olan romantik restoran.`,
                                        `Alsancak Modern:\n${city} bÃ¶lgesinde Ã§aÄŸdaÅŸ lezzetler ve yenilikÃ§i sunumlar sunan ÅŸÄ±k mekan.`,
                                        `Bornova Geleneksel:\n${city} bÃ¶lgesinde yerel mutfaÄŸÄ±n en gÃ¼zel Ã¶rneklerini sunan otantik mekan.`
                                    ]
                                }
                            };
                            
                            // Åehir algÄ±lama
                            let cityKey = 'istanbul'; // varsayÄ±lan
                            if (cityLower.includes('ankara') || cityLower.includes('Ã§ankaya') || cityLower.includes('kÄ±zÄ±lay')) {
                                cityKey = 'ankara';
                            } else if (cityLower.includes('izmir') || cityLower.includes('konak') || cityLower.includes('alsancak')) {
                                cityKey = 'izmir';
                            } else if (cityLower.includes('istanbul') || cityLower.includes('beÅŸiktaÅŸ') || cityLower.includes('ÅŸiÅŸli') || cityLower.includes('kadÄ±kÃ¶y')) {
                                cityKey = 'istanbul';
                            }
                            
                            return cityRestaurants[cityKey]?.[mealType] || cityRestaurants['istanbul']['kahvaltÄ±'];
                        };
                        
                        const responses = generateCitySpecificRestaurants(city, mealType);
                        const selectedResponses = responses.sort(() => 0.5 - Math.random()).slice(0, 3);
                        return selectedResponses;
                    };
                    
                    // KullanÄ±cÄ±nÄ±n onboarding'de girdiÄŸi gerÃ§ek lokasyonu al
                    const userLocation = userData?.location || city;
                    const userCity = userLocation.split(',')[0].trim(); // Sadece ÅŸehir adÄ±nÄ± al
                    
                    // AI iÃ§in prompt oluÅŸtur - gerÃ§ek lokasyon bazlÄ±
                    const cuisineText = userCuisines && userCuisines.length > 0 
                        ? `KullanÄ±cÄ±nÄ±n sevdiÄŸi mutfaklar: ${userCuisines.join(', ')}` 
                        : 'Mutfak tercihi belirtilmemiÅŸ';
                    
                    const mealTypeTurkish = {
                        'kahvaltÄ±': 'kahvaltÄ±',
                        'Ã¶ÄŸle yemeÄŸi': 'Ã¶ÄŸle yemeÄŸi',
                        'akÅŸam yemeÄŸi': 'akÅŸam yemeÄŸi'
                    };
                    
                    const currentMealType = mealTypeTurkish[mealType] || mealType;
                    
                    const aiPrompt = `${userCity} bÃ¶lgesinde ${currentMealType} iÃ§in gerÃ§ek restoran Ã¶nerileri istiyorum. ${cuisineText}. 
                    
                    LÃ¼tfen ${userCity} bÃ¶lgesinde gerÃ§ekten var olan 3-4 farklÄ± restoran Ã¶ner, her birinin adÄ±nÄ± ve detaylÄ± aÃ§Ä±klamasÄ±nÄ± ver. 
                    
                    Ã–NEMLÄ°: 
                    - Sadece ${userCity} bÃ¶lgesindeki GERÃ‡EK restoran isimlerini ver
                    - Her restoran iÃ§in kÄ±sa ama Ã¶z aÃ§Ä±klama yaz
                    - RestoranÄ±n Ã¶zelliklerini, mutfaÄŸÄ±nÄ±, atmosferini belirt
                    - Format: "Restoran AdÄ±:\nAÃ§Ä±klama: [DetaylÄ± aÃ§Ä±klama]"
                    
                    Ã–rnek format:
                    "PiÅŸi Breakfast & Burger:
                    AÃ§Ä±klama: BeÅŸiktaÅŸ KahvaltÄ±cÄ±lar SokaÄŸÄ±'nda piÅŸi bazlÄ± kahvaltÄ±lar sunan popÃ¼ler mekan."
                    
                    Sadece ${userCity} bÃ¶lgesindeki gerÃ§ek restoranlarÄ± ver, baÅŸka aÃ§Ä±klama yapma.`;
                    
                    // AI'dan Ã¶neri al
                    const aiResponse = await generateAIRecommendations(aiPrompt);
                    
                    if (aiResponse && typeof aiResponse === 'string') {
                        // AI yanÄ±tÄ±nÄ± parse et - restoran adÄ± ve aÃ§Ä±klama formatÄ±nda
                        const lines = aiResponse.split('\n').filter(line => line.trim());
                        const suggestions = [];
                        let currentRestaurant = null;
                        
                        for (let i = 0; i < lines.length; i++) {
                            const line = lines[i].trim();
                            
                            // Restoran adÄ± (AÃ§Ä±klama: ile bitmeyen satÄ±rlar)
                            if (line && !line.startsWith('AÃ§Ä±klama:') && !line.match(/^\d+\./)) {
                                if (currentRestaurant) {
                                    suggestions.push(currentRestaurant);
                                }
                                currentRestaurant = {
                                    name: line.replace(/^[-â€¢*]\s*/, ''),
                                    description: ''
                                };
                            }
                            // AÃ§Ä±klama
                            else if (line.startsWith('AÃ§Ä±klama:') && currentRestaurant) {
                                currentRestaurant.description = line.replace('AÃ§Ä±klama:', '').trim();
                            }
                        }
                        
                        // Son restoranÄ± ekle
                        if (currentRestaurant) {
                            suggestions.push(currentRestaurant);
                        }
                        
                        if (suggestions.length > 0) {
                            return suggestions.map(s => `${s.name}:\n${s.description}`);
                        }
                    }
                    
                    // Fallback: Statik veriler (API Ã§alÄ±ÅŸmazsa) - KullanÄ±cÄ±nÄ±n lokasyonuna gÃ¶re
                    const fallbackRestaurants = {
                        'sofya': {
                            kahvaltÄ±: {
                                'TÃ¼rk MutfaÄŸÄ±': [
                                    'Sultan Sofya:\nGeleneksel TÃ¼rk kahvaltÄ±sÄ±nÄ±n en gÃ¼zel Ã¶rneklerini sunan, sÄ±cak ve samimi atmosferi olan popÃ¼ler bir mekandÄ±r.',
                                    'Balkan Evi:\nKarÄ±ÅŸÄ±k kahvaltÄ± tabaÄŸÄ± ve Balkan mutfaÄŸÄ±nÄ±n lezzetlerini sunan, geniÅŸ menÃ¼ seÃ§enekleri olan popÃ¼ler bir mekandÄ±r.',
                                    'Ä°stanbul Kafe:\nSerpme kahvaltÄ± ve TÃ¼rk Ã§ayÄ± geleneÄŸini yaÅŸatan, huzurlu bir ortama sahip popÃ¼ler bir mekandÄ±r.'
                                ],
                                'Bulgar': [
                                    'Mekitsa & Kafe:\nGeleneksel Bulgar kahvaltÄ±sÄ± ve taze mekitsa Ã§eÅŸitleri sunan, yerel lezzetleri keÅŸfetmek iÃ§in ideal bir mekandÄ±r.',
                                    'Banitsa House:\nTaze banitsa ve Ã§ay eÅŸliÄŸinde geleneksel Bulgar kahvaltÄ±sÄ± sunan, sÄ±cak atmosferi olan popÃ¼ler bir mekandÄ±r.',
                                    'Sofia Central:\nModern Bulgar kahvaltÄ±sÄ± ve Ã§aÄŸdaÅŸ sunumlarla dikkat Ã§eken, ÅŸehir merkezinde yer alan popÃ¼ler bir mekandÄ±r.'
                                ],
                                'genel': [
                                    'Costa Coffee:\nUluslararasÄ± kahvaltÄ± seÃ§enekleri ve kaliteli kahve Ã§eÅŸitleri sunan, modern atmosferi olan popÃ¼ler bir mekandÄ±r.',
                                    'Starbucks:\nKlasik kahvaltÄ± seÃ§enekleri ve Ã¶zel kahve Ã§eÅŸitleri sunan, rahat Ã§alÄ±ÅŸma ortamÄ± olan popÃ¼ler bir mekandÄ±r.',
                                    'Cafe Central:\nAvrupa tarzÄ± kahvaltÄ± ve pastane Ã¼rÃ¼nleri sunan, ÅŸÄ±k dekorasyonu olan popÃ¼ler bir mekandÄ±r.'
                                ]
                            },
                            'Ã¶ÄŸle yemeÄŸi': {
                                'TÃ¼rk MutfaÄŸÄ±': [
                                    'KebapÃ§Ä± Ä°skender:\nGeleneksel TÃ¼rk mutfaÄŸÄ±nÄ±n en gÃ¼zel Ã¶rneklerini sunan, Ã¶zellikle kebap Ã§eÅŸitleriyle Ã¼nlÃ¼ popÃ¼ler bir mekandÄ±r.',
                                    'Sultan Sofya:\nTÃ¼rk yemekleri ve geleneksel lezzetleri sunan, sÄ±cak atmosferi olan popÃ¼ler bir mekandÄ±r.',
                                    'Balkan Evi:\nKarÄ±ÅŸÄ±k Balkan mutfaÄŸÄ± ve Ã§eÅŸitli lezzetler sunan, geniÅŸ menÃ¼ seÃ§enekleri olan popÃ¼ler bir mekandÄ±r.'
                                ],
                                'Bulgar': [
                                    'Shtastliveca:\nGeleneksel Bulgar mutfaÄŸÄ±nÄ±n en gÃ¼zel Ã¶rneklerini sunan, yerel lezzetleri keÅŸfetmek iÃ§in ideal bir mekandÄ±r.',
                                    'Made in Home:\nModern Bulgar yemekleri ve Ã§aÄŸdaÅŸ sunumlarla dikkat Ã§eken, ÅŸÄ±k dekorasyonu olan popÃ¼ler bir mekandÄ±r.',
                                    'Pod Lipite:\nKlasik Bulgar restoranÄ± ve geleneksel lezzetleri sunan, sÄ±cak atmosferi olan popÃ¼ler bir mekandÄ±r.'
                                ],
                                'genel': [
                                    'Happy Bar & Grill:\nHÄ±zlÄ± yemek ve Ã§eÅŸitli lezzetler sunan, modern atmosferi olan popÃ¼ler bir mekandÄ±r.',
                                    'McDonald\'s:\nFast food ve hÄ±zlÄ± servis sunan, uluslararasÄ± standartlarda popÃ¼ler bir mekandÄ±r.',
                                    'Subway:\nSaÄŸlÄ±klÄ± sandviÃ§ler ve taze malzemelerle hazÄ±rlanan yemekler sunan popÃ¼ler bir mekandÄ±r.'
                                ]
                            },
                            'akÅŸam yemeÄŸi': {
                                'TÃ¼rk MutfaÄŸÄ±': [
                                    'KebapÃ§Ä± Ä°skender:\nAkÅŸam yemeÄŸi iÃ§in Ã¶zel menÃ¼leri ve geleneksel TÃ¼rk mutfaÄŸÄ±nÄ±n en gÃ¼zel Ã¶rneklerini sunan popÃ¼ler bir mekandÄ±r.',
                                    'Sultan Sofya:\nTÃ¼rk mutfaÄŸÄ± ve akÅŸam yemeÄŸi lezzetleri sunan, romantik atmosferi olan popÃ¼ler bir mekandÄ±r.',
                                    'Balkan Evi:\nAkÅŸam menÃ¼sÃ¼ ve Balkan mutfaÄŸÄ±nÄ±n Ã§eÅŸitli lezzetlerini sunan, sÄ±cak atmosferi olan popÃ¼ler bir mekandÄ±r.'
                                ],
                                'Bulgar': [
                                    'Shtastliveca:\nGeleneksel akÅŸam yemeÄŸi ve Bulgar mutfaÄŸÄ±nÄ±n en gÃ¼zel Ã¶rneklerini sunan popÃ¼ler bir mekandÄ±r.',
                                    'Made in Home:\nModern akÅŸam menÃ¼sÃ¼ ve Ã§aÄŸdaÅŸ Bulgar yemekleri sunan, ÅŸÄ±k dekorasyonu olan popÃ¼ler bir mekandÄ±r.',
                                    'Pod Lipite:\nKlasik akÅŸam yemeÄŸi ve geleneksel Bulgar lezzetleri sunan, sÄ±cak atmosferi olan popÃ¼ler bir mekandÄ±r.'
                                ],
                                'genel': [
                                    'Happy Bar & Grill:\nAkÅŸam yemeÄŸi ve Ã§eÅŸitli lezzetler sunan, canlÄ± atmosferi olan popÃ¼ler bir mekandÄ±r.',
                                    'Pizza Palace:\nPizza ve pasta Ã§eÅŸitleri sunan, aile ortamÄ± olan popÃ¼ler bir mekandÄ±r.',
                                    'Sushi Bar:\nJapon mutfaÄŸÄ± ve sushi Ã§eÅŸitleri sunan, ÅŸÄ±k dekorasyonu olan popÃ¼ler bir mekandÄ±r.'
                                ]
                            }
                        },
                        'ÅŸiÅŸli': {
                            kahvaltÄ±: {
                                'TÃ¼rk MutfaÄŸÄ±': [
                                    'Van KahvaltÄ± Evi - NiÅŸantaÅŸÄ±',
                                    'Ã‡akÄ±r KahvaltÄ± - Harbiye',
                                    'Bebek KahvaltÄ± - Etiler',
                                    'Serpme KahvaltÄ± - MaÃ§ka'
                                ],
                                'Ä°talyan': [
                                    'Caffe Nero - City\'s NiÅŸantaÅŸÄ±',
                                    'Starbucks - Akmerkez',
                                    'Caffe Vergnano - TeÅŸvikiye'
                                ],
                                'Uzak DoÄŸu': [
                                    'SushiCo - City\'s NiÅŸantaÅŸÄ±',
                                    'Wagamama - Akmerkez',
                                    'Zuma - Etiler'
                                ],
                                'Meksika': [
                                    'Taco Bell - City\'s NiÅŸantaÅŸÄ±',
                                    'Chipotle - Akmerkez'
                                ],
                                'Hint': [
                                    'Bombay Palace - Harbiye',
                                    'Masala - NiÅŸantaÅŸÄ±'
                                ],
                                'genel': [
                                    'Kahve DÃ¼nyasÄ± - Harbiye',
                                    'Simit SarayÄ± - TeÅŸvikiye',
                                    'Cafe Nero - MaÃ§ka'
                                ]
                            },
                            'Ã¶ÄŸle yemeÄŸi': {
                                'TÃ¼rk MutfaÄŸÄ±': [
                                    'HacÄ± Abdullah - Harbiye',
                                    'KebapÃ§Ä± Ä°skender - NiÅŸantaÅŸÄ±',
                                    'Ã‡iya SofrasÄ± - Etiler',
                                    'Lokma - MaÃ§ka'
                                ],
                                'Ä°talyan': [
                                    'Pizza Express - City\'s NiÅŸantaÅŸÄ±',
                                    'Vapiano - Akmerkez',
                                    'Rossopomodoro - TeÅŸvikiye'
                                ],
                                'Uzak DoÄŸu': [
                                    'SushiCo - City\'s NiÅŸantaÅŸÄ±',
                                    'Wagamama - Akmerkez',
                                    'Zuma - Etiler'
                                ],
                                'Meksika': [
                                    'Taco Bell - City\'s NiÅŸantaÅŸÄ±',
                                    'Chipotle - Akmerkez'
                                ],
                                'Hint': [
                                    'Bombay Palace - Harbiye',
                                    'Masala - NiÅŸantaÅŸÄ±'
                                ],
                                'genel': [
                                    'Burger King - Harbiye',
                                    'McDonald\'s - TeÅŸvikiye',
                                    'Subway - MaÃ§ka'
                                ]
                            },
                            'akÅŸam yemeÄŸi': {
                                'TÃ¼rk MutfaÄŸÄ±': [
                                    'HacÄ± Abdullah - Harbiye',
                                    'KebapÃ§Ä± Ä°skender - NiÅŸantaÅŸÄ±',
                                    'Ã‡iya SofrasÄ± - Etiler',
                                    'Lokma - MaÃ§ka'
                                ],
                                'Ä°talyan': [
                                    'Pizza Express - City\'s NiÅŸantaÅŸÄ±',
                                    'Vapiano - Akmerkez',
                                    'Rossopomodoro - TeÅŸvikiye'
                                ],
                                'Uzak DoÄŸu': [
                                    'SushiCo - City\'s NiÅŸantaÅŸÄ±',
                                    'Wagamama - Akmerkez',
                                    'Zuma - Etiler'
                                ],
                                'Meksika': [
                                    'Taco Bell - City\'s NiÅŸantaÅŸÄ±',
                                    'Chipotle - Akmerkez'
                                ],
                                'Hint': [
                                    'Bombay Palace - Harbiye',
                                    'Masala - NiÅŸantaÅŸÄ±'
                                ],
                                'genel': [
                                    'Burger King - Harbiye',
                                    'McDonald\'s - TeÅŸvikiye',
                                    'Subway - MaÃ§ka'
                                ]
                            }
                        },
                        'kadÄ±kÃ¶y': {
                            kahvaltÄ±: {
                                'TÃ¼rk MutfaÄŸÄ±': [
                                    'Ã‡iya SofrasÄ± - KadÄ±kÃ¶y',
                                    'Van KahvaltÄ± Evi - Moda',
                                    'Bebek KahvaltÄ± - FenerbahÃ§e'
                                ],
                                'Ä°talyan': [
                                    'Caffe Nero - KadÄ±kÃ¶y',
                                    'Starbucks - Moda',
                                    'Caffe Vergnano - FenerbahÃ§e'
                                ],
                                'Uzak DoÄŸu': [
                                    'SushiCo - KadÄ±kÃ¶y',
                                    'Wagamama - Moda',
                                    'Zuma - FenerbahÃ§e'
                                ],
                                'genel': [
                                    'Kahve DÃ¼nyasÄ± - KadÄ±kÃ¶y',
                                    'Simit SarayÄ± - Moda',
                                    'Cafe Nero - FenerbahÃ§e'
                                ]
                            },
                            'Ã¶ÄŸle yemeÄŸi': {
                                'TÃ¼rk MutfaÄŸÄ±': [
                                    'HacÄ± Abdullah - KadÄ±kÃ¶y',
                                    'KebapÃ§Ä± Ä°skender - Moda',
                                    'Ã‡iya SofrasÄ± - FenerbahÃ§e'
                                ],
                                'Ä°talyan': [
                                    'Pizza Express - KadÄ±kÃ¶y',
                                    'Vapiano - Moda',
                                    'Rossopomodoro - FenerbahÃ§e'
                                ],
                                'genel': [
                                    'Burger King - KadÄ±kÃ¶y',
                                    'McDonald\'s - Moda',
                                    'Subway - FenerbahÃ§e'
                                ]
                            },
                            'akÅŸam yemeÄŸi': {
                                'TÃ¼rk MutfaÄŸÄ±': [
                                    'HacÄ± Abdullah - KadÄ±kÃ¶y',
                                    'KebapÃ§Ä± Ä°skender - Moda',
                                    'Ã‡iya SofrasÄ± - FenerbahÃ§e'
                                ],
                                'Ä°talyan': [
                                    'Pizza Express - KadÄ±kÃ¶y',
                                    'Vapiano - Moda',
                                    'Rossopomodoro - FenerbahÃ§e'
                                ],
                                'genel': [
                                    'Burger King - KadÄ±kÃ¶y',
                                    'McDonald\'s - Moda',
                                    'Subway - FenerbahÃ§e'
                                ]
                            }
                        },
                        'beÅŸiktaÅŸ': {
                            kahvaltÄ±: {
                                'TÃ¼rk MutfaÄŸÄ±': [
                                    'Van KahvaltÄ± Evi - BeÅŸiktaÅŸ',
                                    'Ã‡akÄ±r KahvaltÄ± - OrtakÃ¶y',
                                    'Bebek KahvaltÄ± - Bebek'
                                ],
                                'Ä°talyan': [
                                    'Caffe Nero - BeÅŸiktaÅŸ',
                                    'Starbucks - OrtakÃ¶y',
                                    'Caffe Vergnano - Bebek'
                                ],
                                'genel': [
                                    'Kahve DÃ¼nyasÄ± - BeÅŸiktaÅŸ',
                                    'Simit SarayÄ± - OrtakÃ¶y',
                                    'Cafe Nero - Bebek'
                                ]
                            },
                            'Ã¶ÄŸle yemeÄŸi': {
                                'TÃ¼rk MutfaÄŸÄ±': [
                                    'HacÄ± Abdullah - BeÅŸiktaÅŸ',
                                    'KebapÃ§Ä± Ä°skender - OrtakÃ¶y',
                                    'Ã‡iya SofrasÄ± - Bebek'
                                ],
                                'genel': [
                                    'Burger King - BeÅŸiktaÅŸ',
                                    'McDonald\'s - OrtakÃ¶y',
                                    'Subway - Bebek'
                                ]
                            },
                            'akÅŸam yemeÄŸi': {
                                'TÃ¼rk MutfaÄŸÄ±': [
                                    'HacÄ± Abdullah - BeÅŸiktaÅŸ',
                                    'KebapÃ§Ä± Ä°skender - OrtakÃ¶y',
                                    'Ã‡iya SofrasÄ± - Bebek'
                                ],
                                'genel': [
                                    'Burger King - BeÅŸiktaÅŸ',
                                    'McDonald\'s - OrtakÃ¶y',
                                    'Subway - Bebek'
                                ]
                            }
                        },
                        'genel': {
                            kahvaltÄ±: {
                                'genel': [
                                    `KahvaltÄ± Evi:\n${userCity} ÅŸehrinde taze malzemelerle hazÄ±rlanan geleneksel kahvaltÄ± lezzetleri sunan, sÄ±cak ve samimi atmosferi olan popÃ¼ler bir mekandÄ±r.`,
                                    `Modern Kafe:\n${userCity} ÅŸehrinde uluslararasÄ± kahvaltÄ± seÃ§enekleri ve kaliteli kahve Ã§eÅŸitleri sunan, Ã§aÄŸdaÅŸ tasarÄ±mÄ± olan popÃ¼ler bir mekandÄ±r.`,
                                    `Geleneksel Restoran:\n${userCity} ÅŸehrinde yerel mutfaÄŸÄ±n en gÃ¼zel Ã¶rneklerini sunan, otantik atmosferi olan popÃ¼ler bir mekandÄ±r.`
                                ]
                            },
                            'Ã¶ÄŸle yemeÄŸi': {
                                'genel': [
                                    `Yerel Lokanta:\n${userCity} ÅŸehrinde hÄ±zlÄ± servis ve ev yemekleri sunan, uygun fiyatlÄ± popÃ¼ler bir mekandÄ±r.`,
                                    `Modern Restoran:\n${userCity} ÅŸehrinde saÄŸlÄ±klÄ± seÃ§enekler ve Ã§aÄŸdaÅŸ lezzetler sunan, ÅŸÄ±k dekorasyonu olan popÃ¼ler bir mekandÄ±r.`,
                                    `Aile RestoranÄ±:\n${userCity} ÅŸehrinde ev yapÄ±mÄ± yemekler ve geniÅŸ menÃ¼ seÃ§enekleri sunan, sÄ±cak atmosferi olan popÃ¼ler bir mekandÄ±r.`
                                ]
                            },
                            'akÅŸam yemeÄŸi': {
                                'genel': [
                                    `Fine Dining Restoran:\n${userCity} ÅŸehrinde Ã¶zel akÅŸam yemeÄŸi menÃ¼leri ve ÅŸÄ±k sunumlarÄ±yla dikkat Ã§eken, romantik atmosferi olan popÃ¼ler bir mekandÄ±r.`,
                                    `Geleneksel Restoran:\n${userCity} ÅŸehrinde yerel mutfaÄŸÄ±n en gÃ¼zel Ã¶rneklerini sunan, otantik atmosferi olan popÃ¼ler bir mekandÄ±r.`,
                                    `Modern Restoran:\n${userCity} ÅŸehrinde Ã§aÄŸdaÅŸ lezzetler ve yenilikÃ§i mutfak teknikleriyle hazÄ±rlanan yemekler sunan popÃ¼ler bir mekandÄ±r.`
                                ]
                            }
                        }
                    };
                    
                    // Åehir kontrolÃ¼ ve Ã¶neri seÃ§imi
                    const cityLower = city.toLowerCase();
                    let cityKey = 'genel'; // varsayÄ±lan
                    
                    if (cityLower.includes('sofya') || cityLower.includes('sofia') || cityLower.includes('bulgaristan') || cityLower.includes('bulgaria')) {
                        cityKey = 'sofya';
                    } else if (cityLower.includes('ÅŸiÅŸli') || cityLower.includes('niÅŸantaÅŸÄ±') || cityLower.includes('harbiye') || cityLower.includes('teÅŸvikiye') || cityLower.includes('maÃ§ka')) {
                        cityKey = 'ÅŸiÅŸli';
                    } else if (cityLower.includes('kadÄ±kÃ¶y') || cityLower.includes('moda') || cityLower.includes('fenerbahÃ§e')) {
                        cityKey = 'kadÄ±kÃ¶y';
                    } else if (cityLower.includes('beÅŸiktaÅŸ') || cityLower.includes('ortakÃ¶y') || cityLower.includes('bebek')) {
                        cityKey = 'beÅŸiktaÅŸ';
                    } else {
                        // Bilinmeyen ÅŸehir iÃ§in genel Ã¶neriler
                        cityKey = 'genel';
                    }
                    
                    const cityRestaurants = fallbackRestaurants[cityKey] || fallbackRestaurants['genel'];
                    const mealRestaurants = cityRestaurants[mealType] || cityRestaurants.kahvaltÄ±;
                    
                    // KullanÄ±cÄ±nÄ±n tercih ettiÄŸi mutfaklara gÃ¶re Ã¶neri seÃ§
                    let suggestions = [];
                    
                    if (userCuisines && userCuisines.length > 0) {
                        // KullanÄ±cÄ±nÄ±n tercih ettiÄŸi mutfaklardan Ã¶neri seÃ§
                        for (const cuisine of userCuisines) {
                            if (mealRestaurants[cuisine]) {
                                suggestions = suggestions.concat(mealRestaurants[cuisine].slice(0, 2));
                            }
                        }
                        
                        // EÄŸer yeterli Ã¶neri yoksa genel kategoriden ekle
                        if (suggestions.length < 3) {
                            suggestions = suggestions.concat(mealRestaurants.genel.slice(0, 3 - suggestions.length));
                        }
                    } else {
                        // Tercih yoksa genel kategoriden seÃ§
                        suggestions = mealRestaurants.genel.slice(0, 3);
                    }
                    
                    // Benzersiz Ã¶neriler dÃ¶ndÃ¼r
                    const finalSuggestions = [...new Set(suggestions)].slice(0, 4);
                    console.log('Final restoran Ã¶nerileri:', finalSuggestions);
                    return finalSuggestions;
                    
                } catch (error) {
                    console.error('Restoran Ã¶neri hatasÄ±:', error);
                    // Hata durumunda genel Ã¶neriler
                    return [
                        `${city} bÃ¶lgesinde PopÃ¼ler Restoran - Yerel Lezzetler`,
                        `${city} bÃ¶lgesinde Geleneksel Mutfak - Klasik Yemekler`,
                        `${city} bÃ¶lgesinde Modern Kafe - Ã‡aÄŸdaÅŸ SeÃ§enekler`,
                        `${city} bÃ¶lgesinde Aile RestoranÄ± - SÄ±cak Ortam`
                    ];
                }
            };
            
            // Generate AI tasks based on user data
            const generateAITasks = (userData, dateKey) => {
                if (!userData) return [];
                
                const targetDate = new Date(dateKey + 'T00:00:00');
                const todayName = targetDate.toLocaleString('tr-TR', { weekday: 'long' });
                const isWeekend = todayName === 'Cumartesi' || todayName === 'Pazar';
                
                let generatedTasks = [];
                
                // Yemek gÃ¶revleri
                if (userData.breakfastTime) {
                    const suggestionType = userData.breakfastPreference || 'home';
                    let suggestionDetail = suggestionType === 'home' 
                        ? 'PlanIQ, kahvaltÄ±nÄ± evde yapacaÄŸÄ±nÄ± biliyor. GÃ¼ne enerjik baÅŸlamak iÃ§in omlet, menemen veya saÄŸlÄ±klÄ± bir yulaf ezmesi deneyebilirsin!'
                        : `PlanIQ, kahvaltÄ±nÄ± dÄ±ÅŸarÄ±da yapacaÄŸÄ±nÄ± biliyor. ${userData.city || 'YakÄ±nlarÄ±ndaki'} bÃ¶lgedeki popÃ¼ler bir pastaneden poÄŸaÃ§a/bÃ¶rek alabilir veya gÃ¼zel bir serpme kahvaltÄ± mekanÄ±nÄ± deneyebilirsin.`;
                    
                    generatedTasks.push({
                        id: `ai_breakfast_${dateKey}`,
                        time: userData.breakfastTime,
                        name: "KahvaltÄ±",
                        status: "PlanlandÄ±",
                        isAISuggestion: true,
                        suggestionDetail: suggestionDetail,
                        suggestionType: suggestionType
                    });
                }
                
                if (userData.lunchTime) {
                    const suggestionType = userData.lunchPreference || 'home';
                    let suggestionDetail = suggestionType === 'home'
                        ? 'Ã–ÄŸle yemeÄŸi iÃ§in evdesin! HÄ±zlÄ± bir sandviÃ§, pratik bir salata veya dÃ¼nden kalan lezzetli bir yemeÄŸi Ä±sÄ±tabilirsin.'
                        : `Ã–ÄŸle yemeÄŸi dÄ±ÅŸarÄ±da! ${userData.city || 'YakÄ±nlarÄ±ndaki'} bÃ¶lgedeki bir esnaf lokantasÄ±, kafe veya sevdiÄŸin bir restorana ne dersin?`;
                    
                    generatedTasks.push({
                        id: `ai_lunch_${dateKey}`,
                        time: userData.lunchTime,
                        name: "Ã–ÄŸle YemeÄŸi",
                        status: "PlanlandÄ±",
                        isAISuggestion: true,
                        suggestionDetail: suggestionDetail,
                        suggestionType: suggestionType
                    });
                }
                
                if (userData.dinnerTime && userData.cuisines && userData.cuisines.length > 0) {
                    let randomCuisine = userData.cuisines[Math.floor(Math.random() * userData.cuisines.length)];
                    const suggestionType = userData.dinnerPreference || 'home';
                    let suggestionDetail = '';
                    
                    if (suggestionType === 'outside') {
                        suggestionDetail = `PlanIQ, ${randomCuisine} mutfaÄŸÄ±nÄ± sevdiÄŸini fark etti. AkÅŸam yemeÄŸi iÃ§in ${userData.city || 'yakÄ±nlardaki'} bÃ¶lgede popÃ¼ler bir ${randomCuisine} restoranÄ±nÄ± keÅŸfetmeye ne dersin?`;
                    } else {
                        suggestionDetail = `PlanIQ, ${randomCuisine} mutfaÄŸÄ±nÄ± sevdiÄŸini fark etti. AkÅŸam yemeÄŸini evde yiyeceÄŸini belirttin, gÃ¼zel bir ${randomCuisine.toLowerCase()} yemeÄŸi yapmaya ne dersin?`;
                    }
                    
                    generatedTasks.push({
                        id: `ai_dinner_${dateKey}`,
                        time: userData.dinnerTime,
                        name: `AkÅŸam YemeÄŸi: ${randomCuisine}`,
                        status: "PlanlandÄ±",
                        isAISuggestion: true,
                        suggestionDetail: suggestionDetail,
                        suggestionType: suggestionType
                    });
                }
                
                // Rutin gÃ¶revler
                generatedTasks.push({
                    id: `routine_wake_${dateKey}`,
                    time: (isWeekend ? userData.weekendWakeTime : userData.weekdayWakeTime) || "08:00",
                    name: "Uyan & GÃ¼ne BaÅŸla",
                    status: "PlanlandÄ±",
                    isRoutine: true
                });
                
                generatedTasks.push({
                    id: `routine_sleep_${dateKey}`,
                    time: (isWeekend ? userData.weekendSleepTime : userData.weekdaySleepTime) || "23:00",
                    name: "Uyku ZamanÄ±",
                    status: "PlanlandÄ±",
                    isRoutine: true
                });
                
                // Aktivite Ã¶nerisi
                if (userData.activities && userData.activities.length > 0) {
                    const randomActivity = userData.activities[Math.floor(Math.random() * userData.activities.length)];
                    const dinnerTime = userData.dinnerTime || "19:00";
                    let activityTime = addMinutesToTime(dinnerTime, 90);
                    
                    let suggestionDetail = '';
                    if (randomActivity.includes('Spor')) {
                        activityTime = addMinutesToTime(dinnerTime, -60);
                        suggestionDetail = `PlanIQ, ${randomActivity} yapmayÄ± sevdiÄŸini biliyor. ${activityTime} civarÄ± bunun iÃ§in iyi bir zaman olabilir!`;
                    } else if (randomActivity.includes('Sinema')) {
                        suggestionDetail = `PlanIQ, sinemaya gitmeyi sevdiÄŸini biliyor! AkÅŸam iÃ§in film Ã¶nerisi almak ister misin?`;
                    } else {
                        suggestionDetail = `PlanIQ, ${randomActivity} yapmayÄ± sevdiÄŸini biliyor. AkÅŸam yemeÄŸinden sonra ${activityTime} civarÄ± bunun iÃ§in iyi bir zaman olabilir!`;
                    }
                    
                    generatedTasks.push({
                        id: `ai_activity_${dateKey}`,
                        time: activityTime,
                        name: `${randomActivity} ZamanÄ±`,
                        status: "PlanlandÄ±",
                        isAISuggestion: true,
                        suggestionDetail: suggestionDetail,
                        suggestionType: 'activity'
                    });
                }
                
                return generatedTasks.sort((a, b) => a.time.localeCompare(b.time));
            };
            
            useEffect(() => {
                if (userData && selectedDateKey) {
                    const aiTasks = generateAITasks(userData, selectedDateKey);
                    
                    // Schedule gÃ¶revlerini ekle (eÄŸer varsa)
                    let scheduleTasks = [];
                    if (userData.scheduleTasks) {
                        const today = new Date(selectedDateKey + 'T00:00:00');
                        const dayNames = ['Pazar', 'Pazartesi', 'SalÄ±', 'Ã‡arÅŸamba', 'PerÅŸembe', 'Cuma', 'Cumartesi'];
                        const todayName = dayNames[today.getDay()];
                        
                        scheduleTasks = userData.scheduleTasks.filter(task => 
                            task.dayOfWeek === todayName && task.isRecurring
                        ).map(task => ({
                            ...task,
                            id: `${task.id}-${selectedDateKey}` // Benzersiz ID iÃ§in tarih ekle
                        }));
                    }
                    
                    // TÃ¼m gÃ¶revleri birleÅŸtir ve sÄ±rala
                    const allTasks = [...aiTasks, ...scheduleTasks].sort((a, b) => a.time.localeCompare(b.time));
                    setTasks(allTasks);
                    setIsLoadingTasks(false);
                }
            }, [userData, selectedDateKey]);
            
            const toggleTaskStatus = (taskId, currentStatus) => {
                setTasks(prevTasks => 
                    prevTasks.map(task => 
                        task.id === taskId 
                            ? { ...task, status: currentStatus === 'TamamlandÄ±' ? 'PlanlandÄ±' : 'TamamlandÄ±' }
                            : task
                    )
                );
            };
            
            const deleteTask = (taskId) => {
                setTasks(prevTasks => prevTasks.filter(task => task.id !== taskId));
            };
            
            const addTask = async () => {
                if (!newTask.time || !newTask.name) return;
                
                const newTaskObj = {
                    id: `manual_${Date.now()}`,
                    time: newTask.time,
                    name: newTask.name,
                    status: 'PlanlandÄ±',
                    isAISuggestion: false,
                    isRoutine: false
                };
                
                setTasks(prevTasks => [...prevTasks, newTaskObj].sort((a, b) => a.time.localeCompare(b.time)));
                setNewTask({ time: '', name: '' });
                setIsAddingTask(false);
            };
            
            const getStatusColor = (status) => {
                if (isDark) {
                    const colors = {
                        'TamamlandÄ±': 'bg-green-900/50 text-green-300 border-green-700',
                        'PlanlandÄ±': 'bg-blue-900/50 text-blue-300 border-blue-700',
                        'Beklemede': 'bg-yellow-900/50 text-yellow-300 border-yellow-700'
                    };
                    return colors[status] || 'bg-gray-700 text-gray-300 border-gray-600';
                } else {
                    const colors = {
                        'TamamlandÄ±': 'bg-green-100 text-green-700 border-green-300',
                        'PlanlandÄ±': 'bg-blue-100 text-blue-700 border-blue-300',
                        'Beklemede': 'bg-yellow-100 text-yellow-700 border-yellow-300'
                    };
                    return colors[status] || 'bg-gray-100 text-gray-700 border-gray-300';
                }
            };
            
            const significantTasks = tasks.filter(task => !task.isRoutine);
            const totalSignificantTasks = significantTasks.length;
            const completedSignificantTasks = significantTasks.filter(t => t.status === 'TamamlandÄ±').length;
            const completionPercentage = Math.round((completedSignificantTasks / (totalSignificantTasks || 1)) * 100);
            
            const fullDateString = formatFullDate(new Date(selectedDateKey + 'T00:00:00'));
            
            return React.createElement('div', {
                className: `${isDark ? 'bg-gray-800' : 'bg-white'} rounded-3xl shadow-2xl overflow-hidden transition-colors duration-300`
            }, [
                // Header
                React.createElement('div', {
                    key: 'header',
                    className: `relative overflow-hidden ${isDark ? 'bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900' : 'bg-gradient-to-br from-purple-600 via-purple-500 to-pink-500'} p-6 sm:p-8 transition-all duration-300`
                }, [
                    React.createElement('div', {
                        key: 'bubbles',
                        className: "absolute inset-0 opacity-10"
                    }, [
                        React.createElement('div', {
                            key: 'bubble1',
                            className: "absolute top-0 left-0 w-64 h-64 bg-white rounded-full blur-3xl transform -translate-x-1/2 -translate-y-1/2"
                        }),
                        React.createElement('div', {
                            key: 'bubble2',
                            className: "absolute bottom-0 right-0 w-64 h-64 bg-white rounded-full blur-3xl transform translate-x-1/2 translate-y-1/2"
                        })
                    ]),
                    React.createElement('div', {
                        key: 'content',
                        className: "relative z-10"
                    }, [
                        React.createElement('div', {
                            key: 'title',
                            className: "flex items-center justify-between mb-4"
                        }, [
                            React.createElement('div', {
                                key: 'date',
                                className: ""
                            }, [
                                React.createElement('h2', {
                                    key: 'day',
                                    className: "text-4xl font-bold text-white"
                                }, day),
                                React.createElement('p', {
                                    key: 'fullDate',
                                    className: "text-white/80 font-medium"
                                }, fullDateString)
                            ]),
                            React.createElement('div', {
                                key: 'counter',
                                className: `flex items-center gap-2 px-4 py-2 ${isDark ? 'bg-white/10' : 'bg-white/20'} backdrop-blur-sm rounded-full`
                            }, [
                                React.createElement('span', {
                                    key: 'icon',
                                    className: "text-white"
                                }, 'â°'),
                                React.createElement('span', {
                                    key: 'count',
                                    className: "text-white font-semibold text-sm"
                                }, `${completedSignificantTasks}/${totalSignificantTasks} GÃ¶rev`)
                            ])
                        ]),
                        React.createElement('div', {
                            key: 'progress',
                            className: "flex items-center gap-3"
                        }, [
                            React.createElement('span', {
                                key: 'status',
                                className: `px-4 py-1.5 rounded-full text-sm font-semibold ${isDark ? 'bg-gray-700 text-gray-200 border-gray-600' : 'bg-blue-100 text-blue-700 border-blue-300'} shadow-lg border`
                            }, totalSignificantTasks === 0 ? 'Rutin GÃ¼n' : totalSignificantTasks <= 2 ? 'Hafif GÃ¼n' : totalSignificantTasks <= 4 ? 'Normal GÃ¼n' : 'YoÄŸun GÃ¼n'),
                            React.createElement('div', {
                                key: 'bar',
                                className: `flex-1 h-2.5 ${isDark ? 'bg-white/10' : 'bg-white/20'} rounded-full overflow-hidden backdrop-blur-sm`
                            }, React.createElement('div', {
                                className: "h-full bg-white transition-all duration-500 rounded-full",
                                style: { width: `${completionPercentage}%` }
                            })),
                            React.createElement('span', {
                                key: 'percentage',
                                className: "text-white font-bold text-sm w-12 text-right"
                            }, `%${completionPercentage}`)
                        ])
                    ])
                ]),
                
                // Tasks List
                React.createElement('div', {
                    key: 'tasks',
                    className: `p-6 space-y-3 max-h-96 overflow-y-auto ${isDark ? 'bg-gray-800' : ''}`
                }, [
                    isLoadingTasks ? React.createElement('div', {
                        key: 'loading',
                        className: "flex justify-center items-center py-10"
                    }, React.createElement('div', {
                        className: `w-8 h-8 ${isDark ? 'text-purple-300' : 'text-purple-600'} animate-spin`
                    }, 'â³')) : null,
                    
                    !isLoadingTasks && tasks.length === 0 ? React.createElement('p', {
                        key: 'empty',
                        className: `text-center py-10 ${isDark ? 'text-gray-400' : 'text-gray-500'}`
                    }, 'Bu tarih iÃ§in planlanmÄ±ÅŸ gÃ¶rev yok.') : null,
                    
                    !isLoadingTasks && tasks.map((task) => 
                        React.createElement('div', {
                            key: task.id,
                            className: `p-4 rounded-xl border-2 ${getStatusColor(task.status)} backdrop-blur-sm transition-all hover:scale-102 hover:shadow-md ${task.isAISuggestion ? 'cursor-pointer' : ''}`,
                            onClick: () => task.isAISuggestion && setModalTask(task)
                        }, [
                            React.createElement('div', {
                                key: 'content',
                                className: "flex items-center justify-between"
                            }, [
                                React.createElement('div', {
                                    key: 'left',
                                    className: "flex items-center gap-3 flex-1"
                                }, [
                                    React.createElement('button', {
                                        key: 'toggle',
                                        onClick: (e) => {
                                            e.stopPropagation();
                                            toggleTaskStatus(task.id, task.status);
                                        },
                                        className: "flex-shrink-0 transition-transform hover:scale-110"
                                    }, task.status === 'TamamlandÄ±' ? 'âœ…' : 'â­•'),
                                    React.createElement('div', {
                                        key: 'info',
                                        className: "flex-1 min-w-0"
                                    }, [
                                        React.createElement('div', {
                                            key: 'time',
                                            className: `flex items-center gap-2 mb-1 ${isDark ? 'text-gray-400' : 'text-gray-600'}`
                                        }, [
                                            React.createElement('span', {
                                                key: 'clock',
                                                className: "text-sm"
                                            }, 'â°'),
                                            React.createElement('span', {
                                                key: 'time',
                                                className: "text-sm font-semibold"
                                            }, task.time),
                                            task.isAISuggestion && React.createElement('span', {
                                                key: 'ai',
                                                className: "text-sm"
                                            }, 'âœ¨')
                                        ]),
                                        React.createElement('div', {
                                            key: 'name',
                                            className: "flex items-center gap-2"
                                        }, [
                                            task.category === 'schedule' && React.createElement('span', {
                                                key: 'icon',
                                                className: "text-sm"
                                            }, task.type === 'school' ? 'ğŸ“' : 'ğŸ’¼'),
                                            React.createElement('p', {
                                                key: 'text',
                                                className: `font-medium truncate ${isDark ? 'text-gray-100' : 'text-gray-800'} ${task.status === 'TamamlandÄ±' ? 'line-through opacity-60' : ''}`
                                            }, task.name),
                                            task.category === 'schedule' && React.createElement('span', {
                                                key: 'badge',
                                                className: `px-2 py-0.5 text-xs rounded-full font-medium ${isDark ? 'bg-blue-900/50 text-blue-300' : 'bg-blue-100 text-blue-800'}`
                                            }, 'Sabit')
                                        ])
                                    ])
                                ]),
                                task.category !== 'schedule' && React.createElement('button', {
                                    key: 'delete',
                                    onClick: (e) => {
                                        e.stopPropagation();
                                        deleteTask(task.id);
                                    },
                                    className: `ml-2 p-2 flex-shrink-0 ${isDark ? 'hover:bg-red-900/50' : 'hover:bg-red-100'} rounded-lg transition-colors`
                                }, 'ğŸ—‘ï¸')
                            ])
                        ])
                    )
                ]),
                
                // Add Task Form
                React.createElement('div', {
                    key: 'addForm',
                    className: `p-6 border-t ${isDark ? 'border-gray-700' : 'border-gray-100'}`
                }, isAddingTask ? [
                    React.createElement('div', {
                        key: 'form',
                        className: "space-y-3"
                    }, [
                        React.createElement('input', {
                            key: 'time',
                            type: "time",
                            value: newTask.time,
                            onChange: (e) => setNewTask({ ...newTask, time: e.target.value }),
                            className: `w-full px-4 py-2 rounded-lg border-2 ${isDark ? 'bg-gray-700 border-gray-600 text-white' : 'bg-gray-50 border-gray-300 text-gray-800'}`
                        }),
                        React.createElement('input', {
                            key: 'name',
                            type: "text",
                            placeholder: "GÃ¶rev adÄ±...",
                            value: newTask.name,
                            onChange: (e) => setNewTask({ ...newTask, name: e.target.value }),
                            className: `w-full px-4 py-2 rounded-lg border-2 ${isDark ? 'bg-gray-700 border-gray-600 text-white' : 'bg-gray-50 border-gray-300 text-gray-800'}`
                        }),
                        React.createElement('div', {
                            key: 'buttons',
                            className: "flex gap-2"
                        }, [
                            React.createElement('button', {
                                key: 'cancel',
                                onClick: () => setIsAddingTask(false),
                                className: `w-full py-2 px-4 rounded-lg ${isDark ? 'bg-gray-600 hover:bg-gray-500 text-white' : 'bg-gray-200 hover:bg-gray-300 text-gray-700'} text-sm font-semibold transition-colors`
                            }, 'Ä°ptal'),
                            React.createElement('button', {
                                key: 'add',
                                onClick: addTask,
                                className: "w-full py-2 px-4 rounded-lg bg-purple-600 text-white hover:bg-purple-700 text-sm font-semibold transition-colors"
                            }, 'Ekle')
                        ])
                    ])
                ] : React.createElement('button', {
                    key: 'addButton',
                    onClick: () => setIsAddingTask(true),
                    className: `w-full flex items-center justify-center gap-2 py-3 border-2 ${isDark ? 'border-purple-700 text-purple-300 hover:bg-purple-900/50' : 'border-dashed border-purple-300 text-purple-600 hover:bg-purple-50'} rounded-xl transition-all`
                }, ['â•', 'Yeni GÃ¶rev Ekle'])),
                
                // AI Suggestion Modal
                modalTask && React.createElement('div', {
                    key: 'modal',
                    className: "fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-fadeIn",
                    onClick: () => {
                        setModalTask(null);
                        setModalContentStage('initial');
                        setAiSuggestionContent(null);
                    }
                }, React.createElement('div', {
                    className: `rounded-3xl shadow-2xl overflow-hidden ${isDark ? 'bg-gray-800' : 'bg-white'} max-w-lg w-full transform transition-all animate-slideUp`,
                    onClick: (e) => e.stopPropagation()
                }, [
                    React.createElement('div', {
                        key: 'modalHeader',
                        className: `relative overflow-hidden ${isDark ? 'bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900' : 'bg-gradient-to-br from-purple-600 via-purple-500 to-pink-500'} p-6`
                    }, [
                        React.createElement('div', {
                            key: 'title',
                            className: "flex items-center gap-3"
                        }, ['âœ¨', React.createElement('h3', {
                            key: 'text',
                            className: "text-2xl font-bold text-white"
                        }, 'PlanIQ Ã–nerisi')])
                    ]),
                    React.createElement('div', {
                        key: 'modalContent',
                        className: "p-6 space-y-4 min-h-[150px]"
                    }, [
                        React.createElement('p', {
                            key: 'taskName',
                            className: `text-lg font-semibold ${isDark ? 'text-white' : 'text-gray-900'}`
                        }, modalTask.name),
                        
                        // State makinesi ile iÃ§erik kontrolÃ¼
                        modalContentStage === 'loading' ? React.createElement('div', {
                            key: 'loading',
                            className: "flex items-center justify-center py-8"
                        }, [
                            React.createElement('div', {
                                key: 'spinner',
                                className: "animate-spin rounded-full h-8 w-8 border-b-2 border-purple-500"
                            }),
                            React.createElement('span', {
                                key: 'text',
                                className: `ml-3 ${isDark ? 'text-white' : 'text-gray-700'}`
                            }, 'AI Ã¶nerileri hazÄ±rlanÄ±yor...')
                        ]) : modalContentStage === 'recipe' ? React.createElement('div', {
                            key: 'recipeContent',
                            className: "space-y-4"
                        }, [
                            React.createElement('h4', {
                                key: 'title',
                                className: `text-lg font-bold ${isDark ? 'text-white' : 'text-gray-900'} flex items-center gap-2`
                            }, ['ğŸ³', 'Tarif Ã–nerileri']),
                            React.createElement('div', {
                                key: 'suggestions',
                                className: "space-y-4"
                            }, aiSuggestionContent && Array.isArray(aiSuggestionContent) ? aiSuggestionContent.map((recipe, index) => {
                                const [name, description] = recipe.split(':\n');
                                return React.createElement('div', {
                                    key: index,
                                    className: `p-4 rounded-lg ${isDark ? 'bg-gray-700' : 'bg-gray-100'}`
                                }, [
                                    React.createElement('div', {
                                        key: 'header',
                                        className: "flex items-center gap-2 mb-2"
                                    }, [
                                        React.createElement('span', { key: 'icon' }, 'ğŸ‘¨â€ğŸ³'),
                                        React.createElement('h4', {
                                            key: 'name',
                                            className: `${isDark ? 'text-white' : 'text-gray-800'} font-bold text-lg`
                                        }, name)
                                    ]),
                                    React.createElement('p', {
                                        key: 'description',
                                        className: `${isDark ? 'text-gray-300' : 'text-gray-600'} text-sm leading-relaxed`
                                    }, description)
                                ]);
                            }) : [])
                        ]) : modalContentStage === 'restaurant' ? React.createElement('div', {
                            key: 'restaurantContent',
                            className: "space-y-4"
                        }, [
                            React.createElement('h4', {
                                key: 'title',
                                className: `text-lg font-bold ${isDark ? 'text-white' : 'text-gray-900'} flex items-center gap-2`
                            }, ['ğŸ½ï¸', 'Restoran Ã–nerileri']),
                            React.createElement('div', {
                                key: 'suggestions',
                                className: "space-y-4"
                            }, aiSuggestionContent && Array.isArray(aiSuggestionContent) ? aiSuggestionContent.map((restaurant, index) => {
                                const [name, description] = restaurant.split(':\n');
                                return React.createElement('div', {
                                    key: index,
                                    className: `p-4 rounded-lg ${isDark ? 'bg-gray-700' : 'bg-gray-100'}`
                                }, [
                                    React.createElement('div', {
                                        key: 'header',
                                        className: "flex items-center gap-2 mb-2"
                                    }, [
                                        React.createElement('span', { key: 'icon' }, 'ğŸ“'),
                                        React.createElement('h4', {
                                            key: 'name',
                                            className: `${isDark ? 'text-white' : 'text-gray-800'} font-bold text-lg`
                                        }, name)
                                    ]),
                                    React.createElement('p', {
                                        key: 'description',
                                        className: `${isDark ? 'text-gray-300' : 'text-gray-600'} text-sm leading-relaxed`
                                    }, description)
                                ]);
                            }) : [])
                        ]) : React.createElement('p', {
                            key: 'suggestion',
                            className: `${isDark ? 'text-gray-300' : 'text-gray-700'}`
                        }, modalTask.suggestionDetail || "PlanIQ bu aktiviteyi senin iÃ§in Ã¶nerdi!")
                    ]),
                    React.createElement('div', {
                        key: 'modalFooter',
                        className: `p-4 border-t ${isDark ? 'border-gray-700' : 'border-gray-100'} flex flex-wrap justify-between gap-2`
                    }, [
                        // State makinesi ile buton kontrolÃ¼
                        modalContentStage === 'initial' ? React.createElement('div', {
                            key: 'actions',
                            className: "flex flex-wrap gap-2"
                        }, [
                            // Tarif Ã¶ner butonu (sadece evde yemek iÃ§in)
                            modalTask.suggestionType === 'home' && (modalTask.name.includes('KahvaltÄ±') || modalTask.name.includes('Ã–ÄŸle') || modalTask.name.includes('AkÅŸam')) && React.createElement('button', {
                                key: 'recipe',
                                onClick: async () => {
                                    setModalContentStage('loading');
                                    const mealType = modalTask.name.includes('KahvaltÄ±') ? 'kahvaltÄ±' : modalTask.name.includes('Ã–ÄŸle') ? 'Ã¶ÄŸle yemeÄŸi' : 'akÅŸam yemeÄŸi';
                                    const cuisine = modalTask.name.includes(':') ? modalTask.name.split(': ')[1] : 'genel';
                                    const recipeSuggestions = await generateRecipeSuggestions(mealType, cuisine, userData.cuisines || []);
                                    
                                    setAiSuggestionContent(recipeSuggestions);
                                    setModalContentStage('recipe');
                                },
                                className: `py-2 px-4 rounded-lg font-semibold transition-colors flex items-center gap-2 text-sm ${isDark ? 'bg-green-600 hover:bg-green-500 text-white' : 'bg-green-100 hover:bg-green-200 text-green-800'}`
                            }, ['ğŸ³', 'Tarif Ã–ner']),
                            
                            // DÄ±ÅŸarÄ±da yeme butonu (sadece evde yemek iÃ§in)
                            modalTask.suggestionType === 'home' && (modalTask.name.includes('KahvaltÄ±') || modalTask.name.includes('Ã–ÄŸle') || modalTask.name.includes('AkÅŸam')) && React.createElement('button', {
                                key: 'outside',
                                onClick: async () => {
                                    setModalContentStage('loading');
                                    const mealType = modalTask.name.includes('KahvaltÄ±') ? 'kahvaltÄ±' : modalTask.name.includes('Ã–ÄŸle') ? 'Ã¶ÄŸle yemeÄŸi' : 'akÅŸam yemeÄŸi';
                                    console.log('Restoran Ã¶nerileri isteniyor:', { mealType, city: userData.city, cuisines: userData.cuisines });
                                    
                                    const restaurantSuggestions = await generateRestaurantSuggestions(mealType, userData.city || '', userData.cuisines || []);
                                    console.log('Restoran Ã¶nerileri geldi:', restaurantSuggestions);
                                    
                                    setAiSuggestionContent(restaurantSuggestions);
                                    setModalContentStage('restaurant');
                                },
                                className: `py-2 px-4 rounded-lg font-semibold transition-colors flex items-center gap-2 text-sm ${isDark ? 'bg-blue-600 hover:bg-blue-500 text-white' : 'bg-blue-100 hover:bg-blue-200 text-blue-800'}`
                            }, ['ğŸ½ï¸', 'DÄ±ÅŸarÄ±da Ye'])
                        ]) : React.createElement('div', {
                            key: 'actions',
                            className: "flex flex-wrap gap-2"
                        }, [
                            // Geri butonu
                            React.createElement('button', {
                                key: 'back',
                                onClick: () => {
                                    setModalContentStage('initial');
                                    setAiSuggestionContent(null);
                                },
                                className: `py-2 px-4 rounded-lg font-semibold transition-colors flex items-center gap-2 text-sm ${isDark ? 'bg-gray-600 hover:bg-gray-500 text-white' : 'bg-gray-100 hover:bg-gray-200 text-gray-800'}`
                            }, ['â†', 'Geri'])
                        ]),
                        
                        // SaÄŸ taraf - Kapat butonu
                        React.createElement('div', {
                            key: 'buttons',
                            className: "flex gap-2"
                        }, [
                            React.createElement('button', {
                                key: 'details',
                                onClick: () => {
                                    // DetaylarÄ± gÃ¶ster
                                    alert('Detaylar yakÄ±nda eklenecek!');
                                },
                                className: `py-2 px-4 rounded-lg font-semibold transition-colors flex items-center gap-2 text-sm ${isDark ? 'bg-blue-600 hover:bg-blue-500 text-white' : 'bg-blue-500 hover:bg-blue-600 text-white'}`
                            }, ['ğŸ“‹', 'DetaylarÄ± GÃ¶r']),
                            React.createElement('button', {
                                key: 'map',
                                onClick: () => {
                                    // Haritada gÃ¶ster
                                    alert('Harita Ã¶zelliÄŸi yakÄ±nda eklenecek!');
                                },
                                className: `py-2 px-4 rounded-lg font-semibold transition-colors flex items-center gap-2 text-sm ${isDark ? 'bg-green-600 hover:bg-green-500 text-white' : 'bg-green-500 hover:bg-green-600 text-white'}`
                            }, ['ğŸ—ºï¸', 'Haritada GÃ¶ster']),
                            React.createElement('button', {
                                key: 'close',
                                onClick: () => {
                                    setModalTask(null);
                                    setAiSuggestionContent(null);
                                },
                                className: `py-2 px-4 rounded-lg font-semibold transition-colors flex items-center gap-2 text-sm ${isDark ? 'bg-gray-600 hover:bg-gray-500 text-white' : 'bg-gray-200 hover:bg-gray-300 text-gray-800'}`
                            }, ['âœ…', 'AnladÄ±m'])
                        ])
                    ])
                ]))
            ]);
        };
        
        // Onboarding Component (full version)
        const Onboarding = ({ onComplete }) => {
            const [step, setStep] = useState(0);
            const [formData, setFormData] = useState({
                name: '',
                email: '',
                password: '',
                city: '',
                friends: [''],
                cuisines: [],
                drinks: [],
                activities: [],
                movieGenres: [],
                workStyle: '',
                timePreference: '',
                purpose: [],
                weekdayWakeTime: '',
                weekdaySleepTime: '',
                weekendWakeTime: '',
                weekendSleepTime: '',
                breakfastTime: '',
                lunchTime: '',
                dinnerTime: '',
                breakfastPreference: '',
                lunchPreference: '',
                dinnerPreference: '',
                schedule: {
                    Pazartesi: { active: false, schoolStart: '', schoolEnd: '', workStart: '', workEnd: '' },
                    SalÄ±: { active: false, schoolStart: '', schoolEnd: '', workStart: '', workEnd: '' },
                    Ã‡arÅŸamba: { active: false, schoolStart: '', schoolEnd: '', workStart: '', workEnd: '' },
                    PerÅŸembe: { active: false, schoolStart: '', schoolEnd: '', workStart: '', workEnd: '' },
                    Cuma: { active: false, schoolStart: '', schoolEnd: '', workStart: '', workEnd: '' },
                    Cumartesi: { active: false, schoolStart: '', schoolEnd: '', workStart: '', workEnd: '' },
                    Pazar: { active: false, schoolStart: '', schoolEnd: '', workStart: '', workEnd: '' }
                },
                habitWater: true,
                habitPosture: true,
                habitWalk: true
            });
            
            const updateField = (field, value) => {
                setFormData(prev => ({ ...prev, [field]: value }));
            };
            
            const updateScheduleDay = (day, field, value) => {
                setFormData(prev => ({
                    ...prev,
                    schedule: {
                        ...prev.schedule,
                        [day]: { ...prev.schedule[day], [field]: value }
                    }
                }));
            };
            
            const togglePurpose = (purpose) => {
                const array = formData.purpose;
                if (array.includes(purpose)) {
                    updateField('purpose', array.filter(p => p !== purpose));
                } else {
                    updateField('purpose', [...array, purpose]);
                }
            };
            
            const addFriend = () => {
                setFormData(prev => ({ ...prev, friends: [...prev.friends, ''] }));
            };
            
            const updateFriend = (index, value) => {
                const newFriends = [...formData.friends];
                newFriends[index] = value;
                setFormData(prev => ({ ...prev, friends: newFriends }));
            };
            
            const removeFriend = (index) => {
                const newFriends = formData.friends.filter((_, i) => i !== index);
                setFormData(prev => ({ ...prev, friends: newFriends }));
            };
            
            const toggleArrayItem = (field, item) => {
                const array = formData[field];
                if (array.includes(item)) {
                    updateField(field, array.filter(i => i !== item));
                } else {
                    updateField(field, [...array, item]);
                }
            };
            
            const nextStep = () => setStep(step + 1);
            const prevStep = () => setStep(step - 1);
            
            const canProceed = () => {
                switch (step) {
                    case 0: return formData.name && formData.email && formData.password;
                    case 1: return formData.city && formData.friends.some(f => f.trim());
                    case 2: return formData.cuisines.length > 0 && formData.drinks.length > 0;
                    case 3: return formData.activities.length > 0 && formData.workStyle;
                    case 4: return formData.timePreference && formData.purpose.length > 0;
                    case 5: return formData.weekdayWakeTime && formData.weekdaySleepTime && formData.weekendWakeTime && formData.weekendSleepTime;
                    case 6: return formData.breakfastTime && formData.lunchTime && formData.dinnerTime && formData.breakfastPreference && formData.lunchPreference && formData.dinnerPreference;
                    case 7: 
                        if (formData.purpose.length === 0) return true;
                        const activeDays = Object.values(formData.schedule).filter(day => day.active);
                        if (activeDays.length === 0) return true;
                        return activeDays.every(day => {
                            const hasSchool = formData.purpose.includes('school');
                            const hasWork = formData.purpose.includes('work');
                            if (hasSchool && hasWork) {
                                return (day.schoolStart && day.schoolEnd) || (day.workStart && day.workEnd);
                            } else if (hasSchool) {
                                return day.schoolStart && day.schoolEnd;
                            } else if (hasWork) {
                                return day.workStart && day.workEnd;
                            }
                            return true;
                        });
                    default: return true;
                }
            };
            
            const handleComplete = async () => {
                try {
                    // Firebase olmadan da Ã§alÄ±ÅŸsÄ±n
                    console.log('Onboarding tamamlanÄ±yor...', formData);
                    
                    // Demo user ID oluÅŸtur
                    const userId = 'demo-user-' + Date.now();
                    
                    // Local storage'a kaydet
                    localStorage.setItem('planiq_user', JSON.stringify(formData));
                    localStorage.setItem('planiq_userId', userId);
                    
                    onComplete(formData, userId);
                } catch (error) {
                    console.error('KayÄ±t hatasÄ±:', error);
                    // Hata durumunda da devam et
                    const userId = 'demo-user-' + Date.now();
                    localStorage.setItem('planiq_user', JSON.stringify(formData));
                    localStorage.setItem('planiq_userId', userId);
                    onComplete(formData, userId);
                }
            };
            
            const steps = [
                // Step 0: Temel Bilgiler
                React.createElement('div', { key: 'step0', className: "space-y-6" }, [
                    React.createElement('div', { key: 'header', className: "text-center mb-8" }, [
                        React.createElement('h2', { key: 'title', className: "text-4xl font-extrabold text-white mb-3 tracking-tight" }, 'HoÅŸ Geldin! ğŸ‘‹'),
                        React.createElement('p', { key: 'subtitle', className: "text-white/80 text-lg" }, 'Hadi seni daha yakÄ±ndan tanÄ±yalÄ±m')
                    ]),
                    React.createElement('div', { key: 'name' }, [
                        React.createElement('label', { key: 'label', className: "block text-base font-bold text-white mb-2" }, 'Ad Soyad'),
                        React.createElement('input', {
                            key: 'input',
                            type: "text",
                            value: formData.name,
                            onChange: (e) => updateField('name', e.target.value),
                            placeholder: "AdÄ±n nedir?",
                            className: "w-full px-5 py-3.5 rounded-xl border-2 border-white/30 focus:border-white focus:ring-2 focus:ring-white/50 transition-all text-white placeholder-white/70 bg-white/15 text-lg"
                        })
                    ]),
                    React.createElement('div', { key: 'email' }, [
                        React.createElement('label', { key: 'label', className: "block text-base font-bold text-white mb-2" }, 'E-posta'),
                        React.createElement('input', {
                            key: 'input',
                            type: "email",
                            value: formData.email,
                            onChange: (e) => updateField('email', e.target.value),
                            placeholder: "E-posta adresin",
                            className: "w-full px-5 py-3.5 rounded-xl border-2 border-white/30 focus:border-white focus:ring-2 focus:ring-white/50 transition-all text-white placeholder-white/70 bg-white/15 text-lg"
                        })
                    ]),
                    React.createElement('div', { key: 'password' }, [
                        React.createElement('label', { key: 'label', className: "block text-base font-bold text-white mb-2" }, 'Åifre'),
                        React.createElement('input', {
                            key: 'input',
                            type: "password",
                            value: formData.password,
                            onChange: (e) => updateField('password', e.target.value),
                            placeholder: "GÃ¼venli bir ÅŸifre",
                            className: "w-full px-5 py-3.5 rounded-xl border-2 border-white/30 focus:border-white focus:ring-2 focus:ring-white/50 transition-all text-white placeholder-white/70 bg-white/15 text-lg"
                        })
                    ])
                ]),
                
                // Step 1: Sosyal Ã‡evre
                React.createElement('div', { key: 'step1', className: "space-y-6" }, [
                    React.createElement('div', { key: 'header', className: "text-center mb-8" }, [
                        React.createElement('h2', { key: 'title', className: "text-4xl font-extrabold text-white mb-3 tracking-tight" }, 'Sosyal Ã‡evren ğŸŒ'),
                        React.createElement('p', { key: 'subtitle', className: "text-white/80 text-lg" }, 'Seninle vakit geÃ§irebileceÄŸimiz arkadaÅŸlarÄ±n')
                    ]),
                    React.createElement('div', { key: 'city' }, [
                        React.createElement('label', { key: 'label', className: "block text-base font-bold text-white mb-2" }, 'Ä°lÃ§e / Åehir'),
                        React.createElement('input', {
                            key: 'input',
                            type: "text",
                            value: formData.city,
                            onChange: (e) => updateField('city', e.target.value),
                            placeholder: "Ã¶rn: BeÅŸiktaÅŸ / Ä°stanbul",
                            className: "w-full px-5 py-3.5 rounded-xl border-2 border-white/30 focus:border-white focus:ring-2 focus:ring-white/50 transition-all text-white placeholder-white/70 bg-white/15 text-lg"
                        })
                    ]),
                    React.createElement('div', { key: 'friends' }, [
                        React.createElement('label', { key: 'label', className: "block text-base font-bold text-white mb-2" }, 'YakÄ±n ArkadaÅŸlarÄ±n'),
                        React.createElement('div', { key: 'friendsList', className: "space-y-3" }, 
                            formData.friends.map((friend, index) => 
                                React.createElement('div', { key: index, className: "flex gap-2" }, [
                                    React.createElement('input', {
                                        key: 'input',
                                        type: "text",
                                        value: friend,
                                        onChange: (e) => updateFriend(index, e.target.value),
                                        placeholder: `ArkadaÅŸ ${index + 1}`,
                                        className: "flex-1 px-5 py-3.5 rounded-xl border-2 border-white/30 focus:border-white focus:ring-2 focus:ring-white/50 transition-all text-white placeholder-white/70 bg-white/15 text-lg"
                                    }),
                                    formData.friends.length > 1 && React.createElement('button', {
                                        key: 'remove',
                                        onClick: () => removeFriend(index),
                                        className: "p-3 bg-red-600/30 text-white rounded-xl hover:bg-red-700/50 transition-all"
                                    }, 'âŒ')
                                ])
                            )
                        ),
                        React.createElement('button', {
                            key: 'addFriend',
                            onClick: addFriend,
                            className: "w-full py-3 border-2 border-dashed border-white/40 text-white rounded-xl hover:border-white/70 hover:bg-white/10 transition-all flex items-center justify-center gap-2 text-lg"
                        }, ['â•', 'ArkadaÅŸ Ekle'])
                    ])
                ]),
                
                // Step 2: Yemek & Ä°Ã§ecek
                React.createElement('div', { key: 'step2', className: "space-y-6" }, [
                    React.createElement('div', { key: 'header', className: "text-center mb-8" }, [
                        React.createElement('h2', { key: 'title', className: "text-4xl font-extrabold text-white mb-3 tracking-tight" }, 'Damak TadÄ±n ğŸ½ï¸'),
                        React.createElement('p', { key: 'subtitle', className: "text-white/80 text-lg" }, 'SevdiÄŸin mutfaklarÄ± ve iÃ§ecekleri seÃ§')
                    ]),
                    React.createElement('div', { key: 'cuisines' }, [
                        React.createElement('label', { key: 'label', className: "block text-base font-bold text-white mb-3" }, 'SevdiÄŸin Mutfaklar'),
                        React.createElement('div', { key: 'grid', className: "grid grid-cols-2 sm:grid-cols-4 gap-3" }, 
                            ['Ä°talyan', 'Uzak DoÄŸu', 'TÃ¼rk MutfaÄŸÄ±', 'Meksika ğŸŒ®', 'Hint ğŸ›', 'Fast Food', 'Vejetaryen', 'Deniz ÃœrÃ¼nleri'].map(cuisine => 
                                React.createElement('button', {
                                    key: cuisine,
                                    onClick: () => toggleArrayItem('cuisines', cuisine),
                                    className: `py-3 px-2 text-center rounded-xl border-2 transition-all transform hover:scale-105 font-semibold ${formData.cuisines.includes(cuisine) ? 'bg-white text-purple-700 border-white' : 'bg-white/15 text-white border-white/30 hover:border-white/50'}`
                                }, cuisine)
                            )
                        )
                    ]),
                    React.createElement('div', { key: 'drinks' }, [
                        React.createElement('label', { key: 'label', className: "block text-base font-bold text-white mb-3" }, 'Ä°Ã§ecek Tercihin'),
                        React.createElement('div', { key: 'grid', className: "grid grid-cols-2 gap-3" }, 
                            ['Kahve â˜•', 'Ã‡ay ğŸµ', 'Smoothie ğŸ¥¤', 'Kokteyl ğŸ¹'].map(drink => 
                                React.createElement('button', {
                                    key: drink,
                                    onClick: () => toggleArrayItem('drinks', drink),
                                    className: `py-3 px-4 rounded-xl border-2 transition-all transform hover:scale-105 text-lg font-semibold ${formData.drinks.includes(drink) ? 'bg-white text-purple-700 border-white' : 'bg-white/15 text-white border-white/30 hover:border-white/50'}`
                                }, drink)
                            )
                        )
                    ])
                ]),
                
                // Step 3: Aktivite & Film & Ã‡alÄ±ÅŸma
                React.createElement('div', { key: 'step3', className: "space-y-6" }, [
                    React.createElement('div', { key: 'header', className: "text-center mb-8" }, [
                        React.createElement('h2', { key: 'title', className: "text-4xl font-extrabold text-white mb-3 tracking-tight" }, 'Aktiviteler & Zevklerin ğŸ¬'),
                        React.createElement('p', { key: 'subtitle', className: "text-white/80 text-lg" }, 'BoÅŸ zamanlarÄ±nda ne yaparsÄ±n, ne izlersin?')
                    ]),
                    React.createElement('div', { key: 'activities' }, [
                        React.createElement('label', { key: 'label', className: "block text-base font-bold text-white mb-3" }, 'Sosyal Aktiviteler'),
                        React.createElement('div', { key: 'grid', className: "grid grid-cols-2 gap-3" }, 
                            ['Sinema ğŸ¬', 'Kafe â˜•', 'Restoran ğŸ½ï¸', 'Spor ğŸƒ', 'Kitap ğŸ“š', 'AlÄ±ÅŸveriÅŸ ğŸ›ï¸'].map(activity => 
                                React.createElement('button', {
                                    key: activity,
                                    onClick: () => toggleArrayItem('activities', activity),
                                    className: `py-3 px-4 rounded-xl border-2 transition-all transform hover:scale-105 text-lg font-semibold ${formData.activities.includes(activity) ? 'bg-white text-purple-700 border-white' : 'bg-white/15 text-white border-white/30 hover:border-white/50'}`
                                }, activity)
                            )
                        )
                    ]),
                    React.createElement('div', { key: 'movieGenres' }, [
                        React.createElement('label', { key: 'label', className: "block text-base font-bold text-white mb-3" }, 'SevdiÄŸin Film TÃ¼rleri (Ä°steÄŸe BaÄŸlÄ±)'),
                        React.createElement('div', { key: 'grid', className: "grid grid-cols-2 sm:grid-cols-4 gap-3" }, 
                            ['Aksiyon', 'Komedi', 'Dram', 'Bilim Kurgu', 'Korku', 'Romantik', 'Animasyon', 'Belgesel'].map(genre => 
                                React.createElement('button', {
                                    key: genre,
                                    onClick: () => toggleArrayItem('movieGenres', genre),
                                    className: `py-2 px-3 text-center rounded-xl border-2 transition-all transform hover:scale-105 font-semibold ${formData.movieGenres.includes(genre) ? 'bg-white text-purple-700 border-white' : 'bg-white/15 text-white border-white/30 hover:border-white/50'}`
                                }, genre)
                            )
                        )
                    ]),
                    React.createElement('div', { key: 'workStyle' }, [
                        React.createElement('label', { key: 'label', className: "block text-base font-bold text-white mb-3" }, 'Ã‡alÄ±ÅŸma TarzÄ±n'),
                        React.createElement('div', { key: 'grid', className: "space-y-3" }, 
                            [
                                { id: 'pomodoro', label: 'Pomodoro (25 dk Ã§alÄ±ÅŸ, 5 dk mola)', emoji: 'ğŸ…' },
                                { id: 'long', label: 'Uzun Oturumlar (1-2 saat)', emoji: 'â°' },
                                { id: 'flexible', label: 'Esnek / Ä°stediÄŸim gibi', emoji: 'ğŸ¨' }
                            ].map(style => 
                                React.createElement('button', {
                                    key: style.id,
                                    onClick: () => updateField('workStyle', style.id),
                                    className: `w-full py-3 px-4 rounded-xl border-2 transition-all transform hover:scale-105 text-left text-lg font-semibold ${formData.workStyle === style.id ? 'bg-white text-purple-700 border-white' : 'bg-white/15 text-white border-white/30 hover:border-white/50'}`
                                }, [
                                    React.createElement('span', { key: 'emoji', className: "mr-2" }, style.emoji),
                                    style.label
                                ])
                            )
                        )
                    ])
                ]),
                
                // Step 4: Time & Purpose
                React.createElement('div', { key: 'step4', className: "space-y-6" }, [
                    React.createElement('div', { key: 'header', className: "text-center mb-8" }, [
                        React.createElement('h2', { key: 'title', className: "text-4xl font-extrabold text-white mb-3 tracking-tight" }, 'AmacÄ±n Nedir? ğŸ¯'),
                        React.createElement('p', { key: 'subtitle', className: "text-white/80 text-lg" }, 'PlanIQ\'u neden kullanÄ±yorsun?')
                    ]),
                    React.createElement('div', { key: 'timePref' }, [
                        React.createElement('label', { key: 'label', className: "block text-base font-bold text-white mb-3" }, 'Ne Zaman Daha Verimlisin?'),
                        React.createElement('div', { key: 'grid', className: "grid grid-cols-2 gap-3" }, 
                            [
                                { id: 'morning', label: 'Sabah KiÅŸisi', emoji: 'ğŸŒ…' },
                                { id: 'night', label: 'Gece KiÅŸisi', emoji: 'ğŸŒ™' }
                            ].map(time => 
                                React.createElement('button', {
                                    key: time.id,
                                    onClick: () => updateField('timePreference', time.id),
                                    className: `py-4 px-4 rounded-xl border-2 transition-all transform hover:scale-105 text-lg font-semibold ${formData.timePreference === time.id ? 'bg-white text-purple-700 border-white' : 'bg-white/15 text-white border-white/30 hover:border-white/50'}`
                                }, [
                                    React.createElement('div', { key: 'emoji', className: "text-3xl mb-2" }, time.emoji),
                                    time.label
                                ])
                            )
                        )
                    ]),
                    React.createElement('div', { key: 'purpose' }, [
                        React.createElement('label', { key: 'label', className: "block text-base font-bold text-white mb-3" }, 'AmaÃ§larÄ±n (Birden fazla seÃ§ebilirsin)'),
                        React.createElement('div', { key: 'grid', className: "space-y-3" }, 
                            [
                                { id: 'school', label: 'Okul / Ãœniversite', emoji: 'ğŸ“', desc: 'Dersler, Ã¶devler, sÄ±navlar iÃ§in' },
                                { id: 'work', label: 'Ä°ÅŸ / Kariyer', emoji: 'ğŸ’¼', desc: 'Mesai, projeler, toplantÄ±lar iÃ§in' },
                                { id: 'personal', label: 'KiÅŸisel GeliÅŸim', emoji: 'ğŸŒŸ', desc: 'Hobiler, spor, Ã¶ÄŸrenme iÃ§in' },
                                { id: 'social', label: 'Sosyal YaÅŸam', emoji: 'ğŸ‘¥', desc: 'ArkadaÅŸlar, aile, sosyal aktiviteler iÃ§in' }
                            ].map(purpose => 
                                React.createElement('button', {
                                    key: purpose.id,
                                    onClick: () => togglePurpose(purpose.id),
                                    className: `w-full p-4 rounded-xl border-2 transition-all transform hover:scale-105 text-left ${formData.purpose.includes(purpose.id) ? 'bg-white text-purple-700 border-white' : 'bg-white/15 text-white border-white/30 hover:border-white/50'}`
                                }, [
                                    React.createElement('div', { key: 'content', className: "flex items-center gap-4" }, [
                                        React.createElement('span', { key: 'icon', className: "text-3xl" }, purpose.emoji),
                                        React.createElement('div', { key: 'text' }, [
                                            React.createElement('div', { key: 'label', className: "text-xl font-bold" }, purpose.label),
                                            React.createElement('div', { key: 'desc', className: "text-sm opacity-80" }, purpose.desc)
                                        ])
                                    ])
                                ])
                            )
                        )
                    ])
                ]),
                
                // Step 5: Sleep Routines
                React.createElement('div', { key: 'step5', className: "space-y-6" }, [
                    React.createElement('div', { key: 'header', className: "text-center mb-8" }, [
                        React.createElement('h2', { key: 'title', className: "text-4xl font-extrabold text-white mb-3 tracking-tight" }, 'Uyku Rutinlerin ğŸ˜´'),
                        React.createElement('p', { key: 'subtitle', className: "text-white/80 text-lg" }, 'Genel uyku/uyanÄ±klÄ±k saatlerin nedir?')
                    ]),
                    React.createElement('div', { key: 'sleep', className: "grid grid-cols-1 sm:grid-cols-2 gap-4" }, [
                        React.createElement('div', { key: 'weekdayWake' }, [
                            React.createElement('label', { key: 'label', className: "block text-base font-bold text-white mb-2" }, 'Hafta Ä°Ã§i Uyanma â˜€ï¸'),
                            React.createElement('input', {
                                key: 'input',
                                type: "time",
                                value: formData.weekdayWakeTime,
                                onChange: (e) => updateField('weekdayWakeTime', e.target.value),
                                className: "w-full px-5 py-3.5 rounded-xl border-2 border-white/30 focus:border-white focus:ring-2 focus:ring-white/50 transition-all text-white placeholder-white/70 bg-white/15 text-lg"
                            })
                        ]),
                        React.createElement('div', { key: 'weekdaySleep' }, [
                            React.createElement('label', { key: 'label', className: "block text-base font-bold text-white mb-2" }, 'Hafta Ä°Ã§i Uyuma ğŸŒ™'),
                            React.createElement('input', {
                                key: 'input',
                                type: "time",
                                value: formData.weekdaySleepTime,
                                onChange: (e) => updateField('weekdaySleepTime', e.target.value),
                                className: "w-full px-5 py-3.5 rounded-xl border-2 border-white/30 focus:border-white focus:ring-2 focus:ring-white/50 transition-all text-white placeholder-white/70 bg-white/15 text-lg"
                            })
                        ]),
                        React.createElement('div', { key: 'weekendWake' }, [
                            React.createElement('label', { key: 'label', className: "block text-base font-bold text-white mb-2" }, 'Hafta Sonu Uyanma â˜€ï¸'),
                            React.createElement('input', {
                                key: 'input',
                                type: "time",
                                value: formData.weekendWakeTime,
                                onChange: (e) => updateField('weekendWakeTime', e.target.value),
                                className: "w-full px-5 py-3.5 rounded-xl border-2 border-white/30 focus:border-white focus:ring-2 focus:ring-white/50 transition-all text-white placeholder-white/70 bg-white/15 text-lg"
                            })
                        ]),
                        React.createElement('div', { key: 'weekendSleep' }, [
                            React.createElement('label', { key: 'label', className: "block text-base font-bold text-white mb-2" }, 'Hafta Sonu Uyuma ğŸŒ™'),
                            React.createElement('input', {
                                key: 'input',
                                type: "time",
                                value: formData.weekendSleepTime,
                                onChange: (e) => updateField('weekendSleepTime', e.target.value),
                                className: "w-full px-5 py-3.5 rounded-xl border-2 border-white/30 focus:border-white focus:ring-2 focus:ring-white/50 transition-all text-white placeholder-white/70 bg-white/15 text-lg"
                            })
                        ])
                    ])
                ]),
                
                // Step 6: Yemek Rutinleri
                React.createElement('div', { key: 'step6', className: "space-y-5" }, [
                    React.createElement('div', { key: 'header', className: "text-center mb-8" }, [
                        React.createElement('h2', { key: 'title', className: "text-4xl font-extrabold text-white mb-3 tracking-tight" }, 'Yemek ZamanlarÄ±n ğŸ³'),
                        React.createElement('p', { key: 'subtitle', className: "text-white/80 text-lg" }, 'Genellikle ne zaman yemek yersin ve nerede?')
                    ]),
                    React.createElement('div', { key: 'meals', className: "grid grid-cols-1 sm:grid-cols-3 gap-4 mb-4" }, [
                        React.createElement('div', { key: 'breakfast' }, [
                            React.createElement('label', { key: 'label', className: "block text-base font-bold text-white mb-2" }, 'KahvaltÄ± ğŸ¥'),
                            React.createElement('input', {
                                key: 'input',
                                type: "time",
                                value: formData.breakfastTime,
                                onChange: (e) => updateField('breakfastTime', e.target.value),
                                className: "w-full px-5 py-3.5 rounded-xl border-2 border-white/30 focus:border-white focus:ring-2 focus:ring-white/50 transition-all text-white placeholder-white/70 bg-white/15 text-lg"
                            })
                        ]),
                        React.createElement('div', { key: 'lunch' }, [
                            React.createElement('label', { key: 'label', className: "block text-base font-bold text-white mb-2" }, 'Ã–ÄŸle YemeÄŸi ğŸ¥ª'),
                            React.createElement('input', {
                                key: 'input',
                                type: "time",
                                value: formData.lunchTime,
                                onChange: (e) => updateField('lunchTime', e.target.value),
                                className: "w-full px-5 py-3.5 rounded-xl border-2 border-white/30 focus:border-white focus:ring-2 focus:ring-white/50 transition-all text-white placeholder-white/70 bg-white/15 text-lg"
                            })
                        ]),
                        React.createElement('div', { key: 'dinner' }, [
                            React.createElement('label', { key: 'label', className: "block text-base font-bold text-white mb-2" }, 'AkÅŸam YemeÄŸi ğŸ'),
                            React.createElement('input', {
                                key: 'input',
                                type: "time",
                                value: formData.dinnerTime,
                                onChange: (e) => updateField('dinnerTime', e.target.value),
                                className: "w-full px-5 py-3.5 rounded-xl border-2 border-white/30 focus:border-white focus:ring-2 focus:ring-white/50 transition-all text-white placeholder-white/70 bg-white/15 text-lg"
                            })
                        ])
                    ]),
                    React.createElement('div', { key: 'preferences', className: "grid grid-cols-1 md:grid-cols-3 gap-5" }, [
                        React.createElement('div', { key: 'breakfastPref', className: "space-y-3" }, [
                            React.createElement('label', { key: 'label', className: "block text-base font-bold text-white text-center" }, 'KahvaltÄ± Yerin?'),
                            React.createElement('div', { key: 'grid', className: "flex flex-col gap-2" }, 
                                [
                                    { id: 'home', label: 'Evde', icon: 'ğŸ ' },
                                    { id: 'outside', label: 'DÄ±ÅŸarÄ±da', icon: 'ğŸ“' }
                                ].map(pref => 
                                    React.createElement('button', {
                                        key: pref.id,
                                        onClick: () => updateField('breakfastPreference', pref.id),
                                        className: `py-3 px-4 rounded-xl border-2 transition-all transform hover:scale-105 flex items-center justify-center text-lg font-semibold ${formData.breakfastPreference === pref.id ? 'bg-white text-purple-700 border-white' : 'bg-white/15 text-white border-white/30 hover:border-white/50'}`
                                    }, [pref.icon, ' ', pref.label])
                                )
                            )
                        ]),
                        React.createElement('div', { key: 'lunchPref', className: "space-y-3" }, [
                            React.createElement('label', { key: 'label', className: "block text-base font-bold text-white text-center" }, 'Ã–ÄŸle YemeÄŸi Yerin?'),
                            React.createElement('div', { key: 'grid', className: "flex flex-col gap-2" }, 
                                [
                                    { id: 'home', label: 'Evde', icon: 'ğŸ ' },
                                    { id: 'outside', label: 'DÄ±ÅŸarÄ±da', icon: 'ğŸ“' }
                                ].map(pref => 
                                    React.createElement('button', {
                                        key: pref.id,
                                        onClick: () => updateField('lunchPreference', pref.id),
                                        className: `py-3 px-4 rounded-xl border-2 transition-all transform hover:scale-105 flex items-center justify-center text-lg font-semibold ${formData.lunchPreference === pref.id ? 'bg-white text-purple-700 border-white' : 'bg-white/15 text-white border-white/30 hover:border-white/50'}`
                                    }, [pref.icon, ' ', pref.label])
                                )
                            )
                        ]),
                        React.createElement('div', { key: 'dinnerPref', className: "space-y-3" }, [
                            React.createElement('label', { key: 'label', className: "block text-base font-bold text-white text-center" }, 'AkÅŸam YemeÄŸi Yerin?'),
                            React.createElement('div', { key: 'grid', className: "flex flex-col gap-2" }, 
                                [
                                    { id: 'home', label: 'Evde', icon: 'ğŸ ' },
                                    { id: 'outside', label: 'DÄ±ÅŸarÄ±da', icon: 'ğŸ“' }
                                ].map(pref => 
                                    React.createElement('button', {
                                        key: pref.id,
                                        onClick: () => updateField('dinnerPreference', pref.id),
                                        className: `py-3 px-4 rounded-xl border-2 transition-all transform hover:scale-105 flex items-center justify-center text-lg font-semibold ${formData.dinnerPreference === pref.id ? 'bg-white text-purple-700 border-white' : 'bg-white/15 text-white border-white/30 hover:border-white/50'}`
                                    }, [pref.icon, ' ', pref.label])
                                )
                            )
                        ])
                    ])
                ]),
                
                // Step 7: HaftalÄ±k Program
                React.createElement('div', { key: 'step7', className: "space-y-5" }, [
                    React.createElement('div', { key: 'header', className: "text-center mb-8" }, [
                        React.createElement('h2', { key: 'title', className: "text-4xl font-extrabold text-white mb-3 tracking-tight" }, 'HaftalÄ±k ProgramÄ±n ğŸ—“ï¸'),
                        React.createElement('p', { key: 'subtitle', className: "text-white/80 text-lg" }, 
                            formData.purpose.includes('school') && formData.purpose.includes('work') 
                                ? 'Sabit ders ve mesai gÃ¼n/saatlerini gir.' 
                                : formData.purpose.includes('school') 
                                    ? 'Sabit ders gÃ¼n ve saatlerini gir.'
                                    : formData.purpose.includes('work')
                                        ? 'Sabit mesai gÃ¼n ve saatlerini gir.'
                                        : 'Sabit program gÃ¼n ve saatlerini gir.'
                        )
                    ]),
                    React.createElement('div', { key: 'schedule', className: "space-y-4" }, 
                        ['Pazartesi', 'SalÄ±', 'Ã‡arÅŸamba', 'PerÅŸembe', 'Cuma', 'Cumartesi', 'Pazar'].map(day => {
                            const dayData = formData.schedule[day];
                            return React.createElement('div', {
                                key: day,
                                className: `p-4 rounded-xl transition-all ${dayData.active ? 'bg-white/20' : 'bg-white/10'}`
                            }, [
                                React.createElement('div', {
                                    key: 'header',
                                    className: "flex items-center justify-between"
                                }, [
                                    React.createElement('label', {
                                        key: 'label',
                                        htmlFor: `toggle-${day}`,
                                        className: "text-lg font-semibold text-white cursor-pointer"
                                    }, day),
                                    React.createElement('button', {
                                        key: 'toggle',
                                        id: `toggle-${day}`,
                                        onClick: () => updateScheduleDay(day, 'active', !dayData.active),
                                        className: "cursor-pointer"
                                    }, dayData.active ? 'ğŸ”˜' : 'âšª')
                                ]),
                                dayData.active && React.createElement('div', {
                                    key: 'times',
                                    className: "space-y-4 mt-4"
                                }, [
                                    // Ders saatleri (sadece okul seÃ§ilmiÅŸse veya hem okul hem iÅŸ seÃ§ilmiÅŸse)
                                    (formData.purpose.includes('school')) && React.createElement('div', {
                                        key: 'school',
                                        className: "bg-white/10 rounded-xl p-4"
                                    }, [
                                        React.createElement('h4', {
                                            key: 'title',
                                            className: "text-lg font-bold text-white mb-3 flex items-center gap-2"
                                        }, ['ğŸ“', 'Ders Saatleri']),
                                        React.createElement('div', {
                                            key: 'grid',
                                            className: "grid grid-cols-1 sm:grid-cols-2 gap-4"
                                        }, [
                                            React.createElement('div', { key: 'start' }, [
                                                React.createElement('label', {
                                                    key: 'label',
                                                    className: "block text-base font-bold text-white mb-2"
                                                }, 'Ders BaÅŸlangÄ±Ã§'),
                                                React.createElement('input', {
                                                    key: 'input',
                                                    type: "time",
                                                    value: dayData.schoolStart,
                                                    onChange: (e) => updateScheduleDay(day, 'schoolStart', e.target.value),
                                                    className: "w-full px-5 py-3.5 rounded-xl border-2 border-white/30 focus:border-white focus:ring-2 focus:ring-white/50 transition-all text-white placeholder-white/70 bg-white/15 text-lg"
                                                })
                                            ]),
                                            React.createElement('div', { key: 'end' }, [
                                                React.createElement('label', {
                                                    key: 'label',
                                                    className: "block text-base font-bold text-white mb-2"
                                                }, 'Ders BitiÅŸ'),
                                                React.createElement('input', {
                                                    key: 'input',
                                                    type: "time",
                                                    value: dayData.schoolEnd,
                                                    onChange: (e) => updateScheduleDay(day, 'schoolEnd', e.target.value),
                                                    className: "w-full px-5 py-3.5 rounded-xl border-2 border-white/30 focus:border-white focus:ring-2 focus:ring-white/50 transition-all text-white placeholder-white/70 bg-white/15 text-lg"
                                                })
                                            ])
                                        ])
                                    ]),
                                    
                                    // Mesai saatleri (sadece iÅŸ seÃ§ilmiÅŸse veya hem okul hem iÅŸ seÃ§ilmiÅŸse)
                                    (formData.purpose.includes('work')) && React.createElement('div', {
                                        key: 'work',
                                        className: "bg-white/10 rounded-xl p-4"
                                    }, [
                                        React.createElement('h4', {
                                            key: 'title',
                                            className: "text-lg font-bold text-white mb-3 flex items-center gap-2"
                                        }, ['ğŸ’¼', 'Mesai Saatleri']),
                                        React.createElement('div', {
                                            key: 'grid',
                                            className: "grid grid-cols-1 sm:grid-cols-2 gap-4"
                                        }, [
                                            React.createElement('div', { key: 'start' }, [
                                                React.createElement('label', {
                                                    key: 'label',
                                                    className: "block text-base font-bold text-white mb-2"
                                                }, 'Mesai BaÅŸlangÄ±Ã§'),
                                                React.createElement('input', {
                                                    key: 'input',
                                                    type: "time",
                                                    value: dayData.workStart,
                                                    onChange: (e) => updateScheduleDay(day, 'workStart', e.target.value),
                                                    className: "w-full px-5 py-3.5 rounded-xl border-2 border-white/30 focus:border-white focus:ring-2 focus:ring-white/50 transition-all text-white placeholder-white/70 bg-white/15 text-lg"
                                                })
                                            ]),
                                            React.createElement('div', { key: 'end' }, [
                                                React.createElement('label', {
                                                    key: 'label',
                                                    className: "block text-base font-bold text-white mb-2"
                                                }, 'Mesai BitiÅŸ'),
                                                React.createElement('input', {
                                                    key: 'input',
                                                    type: "time",
                                                    value: dayData.workEnd,
                                                    onChange: (e) => updateScheduleDay(day, 'workEnd', e.target.value),
                                                    className: "w-full px-5 py-3.5 rounded-xl border-2 border-white/30 focus:border-white focus:ring-2 focus:ring-white/50 transition-all text-white placeholder-white/70 bg-white/15 text-lg"
                                                })
                                            ])
                                        ])
                                    ])
                                ])
                            ]);
                        })
                    )
                ]),
                
                // Step 8: TamamlandÄ±
                React.createElement('div', { key: 'step8', className: "text-center space-y-6" }, [
                    React.createElement('div', { key: 'icon', className: "w-24 h-24 bg-gradient-to-br from-white to-white/80 rounded-full flex items-center justify-center mx-auto mb-6 animate-bounce" }, 'âœ…'),
                    React.createElement('h2', { key: 'title', className: "text-4xl font-extrabold text-white mb-4 tracking-tight" }, 'Harika! ğŸ‰'),
                    React.createElement('p', { key: 'subtitle', className: "text-xl text-white/90 mb-6" }, `Her ÅŸey hazÄ±r, ${formData.name}!`),
                    React.createElement('div', { key: 'features', className: "bg-white/20 rounded-2xl p-6 text-left space-y-3" }, [
                        React.createElement('p', { key: 'ai', className: "text-white/90 text-lg" }, 'âœ¨ Yapay zeka destekli Ã¶neriler aktif'),
                        React.createElement('p', { key: 'plans', className: "text-white/90 text-lg" }, 'ğŸ“… KiÅŸiselleÅŸtirilmiÅŸ planlar hazÄ±r'),
                        React.createElement('p', { key: 'reminders', className: "text-white/90 text-lg" }, 'ğŸ”” AkÄ±llÄ± hatÄ±rlatmalar devrede'),
                        React.createElement('p', { key: 'friends', className: "text-white/90 text-lg" }, `ğŸ‘¥ ${formData.friends.filter(f => f.trim()).length} arkadaÅŸÄ±nla planlar yapabiliriz`)
                    ])
                ])
            ];
            
            return React.createElement('div', {
                className: "fixed inset-0 bg-gradient-to-br from-purple-700 via-indigo-800 to-pink-600 flex items-center justify-center p-4 z-50 overflow-hidden"
            }, [
                React.createElement('div', { key: 'bubbles', className: "absolute -top-1/4 -left-1/4 w-96 h-96 bg-white/15 rounded-full filter blur-3xl opacity-70" }),
                React.createElement('div', { key: 'bubbles2', className: "absolute -bottom-1/4 -right-1/4 w-72 h-72 bg-white/10 rounded-full filter blur-3xl opacity-60" }),
                React.createElement('div', { key: 'card', className: "bg-white/15 rounded-3xl shadow-2xl max-w-2xl w-full p-6 sm:p-10 max-h-[90vh] overflow-y-auto backdrop-blur-xl border border-white/30 ring-2 ring-white/10 transform transition-all duration-300 hover:scale-[1.01]" }, [
                    // Progress Bar
                    React.createElement('div', { key: 'progress', className: "mb-8" }, [
                        React.createElement('div', { key: 'bar', className: "flex justify-between mb-2 space-x-1" }, 
                            [...Array(8)].map((_, s) => 
                                React.createElement('div', { key: s, className: "w-full h-2 bg-white/30 rounded-full overflow-hidden" }, 
                                    React.createElement('div', {
                                        className: "h-full bg-white rounded-full transition-transform duration-500 ease-out",
                                        style: { transform: s < step ? 'translateX(0%)' : 'translateX(-100%)' }
                                    })
                                )
                            )
                        ),
                        React.createElement('p', { key: 'text', className: "text-sm font-semibold text-white/70 text-center" }, `AdÄ±m ${step + 1} / 8`)
                    ]),
                    
                    // Current Step
                    React.createElement('div', { key: 'content', className: "min-h-[400px] transition-opacity duration-300 ease-out" }, 
                        React.createElement('div', { className: "animate-slideUp" }, steps[step])
                    ),
                    
                    // Navigation Buttons
                    React.createElement('div', { key: 'nav', className: "flex gap-3 mt-8" }, [
                        step > 0 && React.createElement('button', {
                            key: 'prev',
                            onClick: prevStep,
                            className: "flex items-center gap-2 px-6 py-3 bg-white/20 text-white rounded-xl hover:bg-white/30 transition-all border border-white/30 transform hover:scale-105 font-semibold"
                        }, ['â†', 'Geri']),
                        
                        step === 7 ? React.createElement('button', {
                            key: 'complete',
                            onClick: handleComplete,
                            className: "w-full flex items-center justify-center gap-2 px-6 py-4 bg-gradient-to-r from-emerald-400 to-green-500 text-white rounded-xl hover:from-emerald-500 hover:to-green-600 transition-all text-xl font-bold transform hover:scale-105"
                        }, ['Hadi BaÅŸlayalÄ±m! ğŸš€']) : React.createElement('button', {
                            key: 'next',
                            onClick: nextStep,
                            disabled: !canProceed(),
                            className: `flex-1 flex items-center justify-center gap-2 px-6 py-3 rounded-xl transition-all transform hover:scale-105 text-xl font-bold ${canProceed() ? 'bg-white text-purple-700 hover:bg-gray-100' : 'bg-white/20 text-white/50 cursor-not-allowed border border-white/30'}`
                        }, ['Devam', 'â†’'])
                    ])
                ])
            ]);
        };
        
        // Main App Component
        // Profile Page Component
        const ProfilePage = ({ userData, onBack, onEdit }) => {
            const [isEditing, setIsEditing] = useState(false);
            const [editData, setEditData] = useState(userData);
            
            const handleSave = () => {
                // Local storage'a kaydet
                localStorage.setItem('planiq_user', JSON.stringify(editData));
                onEdit(editData);
                setIsEditing(false);
            };
            
            const updateField = (field, value) => {
                setEditData(prev => ({ ...prev, [field]: value }));
            };
            
            if (isEditing) {
                return React.createElement('div', {
                    className: "min-h-screen bg-gradient-to-br from-purple-700 via-indigo-800 to-pink-600 p-4"
                }, [
                    React.createElement('div', {
                        key: 'header',
                        className: "flex items-center justify-between mb-8"
                    }, [
                        React.createElement('button', {
                            onClick: () => setIsEditing(false),
                            className: "p-3 bg-white/20 text-white rounded-xl hover:bg-white/30 transition-all"
                        }, 'â†'),
                        React.createElement('h1', {
                            className: "text-2xl font-bold text-white"
                        }, 'Profili DÃ¼zenle')
                    ]),
                    React.createElement('div', {
                        key: 'form',
                        className: "bg-white/15 rounded-2xl p-6 backdrop-blur-xl space-y-6"
                    }, [
                        React.createElement('div', { key: 'name' }, [
                            React.createElement('label', {
                                key: 'label',
                                className: "block text-base font-bold text-white mb-2"
                            }, 'Ad Soyad'),
                            React.createElement('input', {
                                key: 'input',
                                type: "text",
                                value: editData.name,
                                onChange: (e) => updateField('name', e.target.value),
                                className: "w-full px-5 py-3.5 rounded-xl border-2 border-white/30 focus:border-white focus:ring-2 focus:ring-white/50 transition-all text-white placeholder-white/70 bg-white/15 text-lg"
                            })
                        ]),
                        React.createElement('div', { key: 'city' }, [
                            React.createElement('label', {
                                key: 'label',
                                className: "block text-base font-bold text-white mb-2"
                            }, 'Åehir'),
                            React.createElement('input', {
                                key: 'input',
                                type: "text",
                                value: editData.city,
                                onChange: (e) => updateField('city', e.target.value),
                                className: "w-full px-5 py-3.5 rounded-xl border-2 border-white/30 focus:border-white focus:ring-2 focus:ring-white/50 transition-all text-white placeholder-white/70 bg-white/15 text-lg"
                            })
                        ]),
                        React.createElement('div', { key: 'purpose' }, [
                            React.createElement('label', {
                                key: 'label',
                                className: "block text-base font-bold text-white mb-2"
                            }, 'AmaÃ§'),
                            React.createElement('div', { key: 'grid', className: "grid grid-cols-2 gap-3" }, 
                                [
                                    { id: 'school', label: 'Ã–ÄŸrenci', icon: 'ğŸ“' },
                                    { id: 'work', label: 'Ã‡alÄ±ÅŸan', icon: 'ğŸ’¼' }
                                ].map(option => 
                                    React.createElement('button', {
                                        key: option.id,
                                        onClick: () => updateField('purpose', option.id),
                                        className: `py-3 px-4 rounded-xl border-2 transition-all transform hover:scale-105 flex items-center justify-center text-lg font-semibold ${editData.purpose === option.id ? 'bg-white text-purple-700 border-white' : 'bg-white/15 text-white border-white/30 hover:border-white/50'}`
                                    }, [option.icon, ' ', option.label])
                                )
                            )
                        ]),
                        React.createElement('div', { key: 'apiKey' }, [
                            React.createElement('label', {
                                key: 'label',
                                className: "block text-base font-bold text-white mb-2"
                            }, 'OpenAI API Key (Ä°steÄŸe BaÄŸlÄ±)'),
                            React.createElement('input', {
                                key: 'input',
                                type: "password",
                                value: editData.apiKey || '',
                                onChange: (e) => updateField('apiKey', e.target.value),
                                placeholder: "sk-proj-... (AI Ã¶nerileri iÃ§in)",
                                className: "w-full px-5 py-3.5 rounded-xl border-2 border-white/30 focus:border-white focus:ring-2 focus:ring-white/50 transition-all text-white placeholder-white/70 bg-white/15 text-lg"
                            }),
                            React.createElement('p', {
                                key: 'help',
                                className: "text-sm text-white/60 mt-2"
                            }, 'AI Ã¶nerileri iÃ§in OpenAI API key gerekli. Key yoksa statik Ã¶neriler gÃ¶sterilir.')
                        ]),
                        React.createElement('div', { key: 'buttons', className: "flex gap-3" }, [
                            React.createElement('button', {
                                key: 'cancel',
                                onClick: () => setIsEditing(false),
                                className: "flex-1 py-3 px-4 bg-white/20 text-white rounded-xl hover:bg-white/30 transition-all font-semibold"
                            }, 'Ä°ptal'),
                            React.createElement('button', {
                                key: 'save',
                                onClick: () => {
                                    // API key'i localStorage'a kaydet
                                    if (editData.apiKey) {
                                        localStorage.setItem('openai_api_key', editData.apiKey);
                                    }
                                    handleSave();
                                },
                                className: "flex-1 py-3 px-4 bg-gradient-to-r from-emerald-400 to-green-500 text-white rounded-xl hover:from-emerald-500 hover:to-green-600 transition-all font-semibold"
                            }, 'Kaydet')
                        ])
                    ])
                ]);
            }
            
            return React.createElement('div', {
                className: "min-h-screen bg-gradient-to-br from-purple-700 via-indigo-800 to-pink-600 p-4"
            }, [
                React.createElement('div', {
                    key: 'header',
                    className: "flex items-center justify-between mb-8"
                }, [
                    React.createElement('button', {
                        onClick: onBack,
                        className: "p-3 bg-white/20 text-white rounded-xl hover:bg-white/30 transition-all"
                    }, 'â†'),
                    React.createElement('h1', {
                        className: "text-2xl font-bold text-white"
                    }, 'Profil'),
                    React.createElement('button', {
                        onClick: () => setIsEditing(true),
                        className: "p-3 bg-white/20 text-white rounded-xl hover:bg-white/30 transition-all"
                    }, 'âœï¸')
                ]),
                React.createElement('div', {
                    key: 'content',
                    className: "bg-white/15 rounded-2xl p-6 backdrop-blur-xl space-y-6"
                }, [
                    React.createElement('div', { key: 'avatar', className: "text-center" }, [
                        React.createElement('div', {
                            key: 'icon',
                            className: "w-24 h-24 bg-gradient-to-br from-white to-white/80 rounded-full flex items-center justify-center mx-auto mb-4 text-4xl"
                        }, 'ğŸ‘¤'),
                        React.createElement('h2', {
                            key: 'name',
                            className: "text-3xl font-bold text-white mb-2"
                        }, userData.name),
                        React.createElement('p', {
                            key: 'email',
                            className: "text-white/70 text-lg"
                        }, userData.email || 'E-posta yok')
                    ]),
                    React.createElement('div', { key: 'info', className: "space-y-4" }, [
                        React.createElement('div', { key: 'city', className: "flex items-center gap-3" }, [
                            React.createElement('span', { key: 'icon', className: "text-2xl" }, 'ğŸ“'),
                            React.createElement('span', { key: 'text', className: "text-white/90 text-lg" }, userData.city)
                        ]),
                        React.createElement('div', { key: 'purpose', className: "flex items-start gap-3" }, [
                            React.createElement('span', { key: 'icon', className: "text-2xl mt-1" }, 'ğŸ¯'),
                            React.createElement('div', { key: 'content' }, [
                                React.createElement('p', { key: 'label', className: "text-white/90 text-lg font-semibold" }, 'AmaÃ§larÄ±n'),
                                React.createElement('div', { key: 'tags', className: "flex flex-wrap gap-2 mt-2" }, 
                                    (userData.purpose || []).map((purpose, index) => {
                                        const purposeMap = {
                                            'school': { label: 'Okul/Ãœniversite', icon: 'ğŸ“' },
                                            'work': { label: 'Ä°ÅŸ/Kariyer', icon: 'ğŸ’¼' },
                                            'personal': { label: 'KiÅŸisel GeliÅŸim', icon: 'ğŸŒŸ' },
                                            'social': { label: 'Sosyal YaÅŸam', icon: 'ğŸ‘¥' }
                                        };
                                        const purposeInfo = purposeMap[purpose] || { label: purpose, icon: 'â­' };
                                        return React.createElement('span', {
                                            key: index,
                                            className: "px-3 py-1 bg-white/20 text-white rounded-full text-sm flex items-center gap-1"
                                        }, [purposeInfo.icon, ' ', purposeInfo.label]);
                                    })
                                )
                            ])
                        ]),
                        userData.friends && userData.friends.filter(f => f.trim()).length > 0 && React.createElement('div', { key: 'friends', className: "flex items-center gap-3" }, [
                            React.createElement('span', { key: 'icon', className: "text-2xl" }, 'ğŸ‘¥'),
                            React.createElement('span', { key: 'text', className: "text-white/90 text-lg" }, `${userData.friends.filter(f => f.trim()).length} arkadaÅŸ`)
                        ]),
                        userData.cuisines && userData.cuisines.length > 0 && React.createElement('div', { key: 'cuisines', className: "flex items-start gap-3" }, [
                            React.createElement('span', { key: 'icon', className: "text-2xl mt-1" }, 'ğŸ½ï¸'),
                            React.createElement('div', { key: 'content' }, [
                                React.createElement('p', { key: 'label', className: "text-white/90 text-lg font-semibold" }, 'SevdiÄŸin Mutfaklar'),
                                React.createElement('div', { key: 'tags', className: "flex flex-wrap gap-2 mt-2" }, 
                                    userData.cuisines.map((cuisine, index) => 
                                        React.createElement('span', {
                                            key: index,
                                            className: "px-3 py-1 bg-white/20 text-white rounded-full text-sm"
                                        }, cuisine)
                                    )
                                )
                            ])
                        ]),
                        userData.activities && userData.activities.length > 0 && React.createElement('div', { key: 'activities', className: "flex items-start gap-3" }, [
                            React.createElement('span', { key: 'icon', className: "text-2xl mt-1" }, 'ğŸ¬'),
                            React.createElement('div', { key: 'content' }, [
                                React.createElement('p', { key: 'label', className: "text-white/90 text-lg font-semibold" }, 'Aktivitelerin'),
                                React.createElement('div', { key: 'tags', className: "flex flex-wrap gap-2 mt-2" }, 
                                    userData.activities.map((activity, index) => 
                                        React.createElement('span', {
                                            key: index,
                                            className: "px-3 py-1 bg-white/20 text-white rounded-full text-sm"
                                        }, activity)
                                    )
                                )
                            ])
                        ])
                    ])
                ])
            ]);
        };

        const App = () => {
            const [isSplashVisible, setIsSplashVisible] = useState(true);
            const [isDark, setIsDark] = useState(false);
            const [userData, setUserData] = useState(null);
            const [userId, setUserId] = useState(null);
            const [currentPage, setCurrentPage] = useState('main');
            const [selectedDate, setSelectedDate] = useState(new Date());
            const [notifications, setNotifications] = useState([]);
            
            useEffect(() => {
                const timer = setTimeout(() => {
                    setIsSplashVisible(false);
                }, 3000);
                
                return () => clearTimeout(timer);
            }, []);
            
            useEffect(() => {
                if (isDark) {
                    document.documentElement.classList.add('dark');
                } else {
                    document.documentElement.classList.remove('dark');
                }
            }, [isDark]);
            
            // Check for existing user data
            useEffect(() => {
                const checkUser = () => {
                    try {
                        // Local storage'dan kullanÄ±cÄ± verilerini kontrol et
                        const savedUser = localStorage.getItem('planiq_user');
                        const savedUserId = localStorage.getItem('planiq_userId');
                        
                        if (savedUser && savedUserId) {
                            setUserData(JSON.parse(savedUser));
                            setUserId(savedUserId);
                            console.log('KullanÄ±cÄ± verileri yÃ¼klendi:', JSON.parse(savedUser));
                        }
                    } catch (error) {
                        console.error('KullanÄ±cÄ± kontrolÃ¼ hatasÄ±:', error);
                    }
                };
                
                if (!isSplashVisible) {
                    checkUser();
                }
            }, [isSplashVisible]);
            
            // Onboarding'e geri dÃ¶nmek iÃ§in local storage'Ä± temizle
            const resetToOnboarding = () => {
                localStorage.removeItem('planiq_user');
                localStorage.removeItem('planiq_userId');
                setUserData(null);
                setUserId(null);
                setCurrentPage('main');
            };
            
            const handleOnboardingComplete = (data, uid) => {
                // Schedule verilerini ana uygulamaya entegre et
                const processedData = {
                    ...data,
                    // Schedule verilerini tasks formatÄ±na Ã§evir
                    scheduleTasks: generateScheduleTasks(data.schedule, data.purpose)
                };
                setUserData(processedData);
                setUserId(uid);
            };
            
            // Schedule verilerinden gÃ¶revler oluÅŸtur
            const generateScheduleTasks = (schedule, purposes) => {
                const tasks = [];
                const today = new Date();
                
                // 7 gÃ¼n iÃ§in schedule gÃ¶revleri oluÅŸtur
                for (let i = 0; i < 7; i++) {
                    const date = new Date(today);
                    date.setDate(today.getDate() + i);
                    const dayKey = formatDateKey(date);
                    const dayNames = ['Pazar', 'Pazartesi', 'SalÄ±', 'Ã‡arÅŸamba', 'PerÅŸembe', 'Cuma', 'Cumartesi'];
                    const dayName = dayNames[date.getDay()];
                    const dayData = schedule[dayName];
                    
                    if (dayData && dayData.active) {
                        // Ders saatleri
                        if (purposes.includes('school') && dayData.schoolStart && dayData.schoolEnd) {
                            tasks.push({
                                id: `schedule-school-${dayKey}-${i}`,
                                name: 'Ders',
                                time: dayData.schoolStart,
                                duration: calculateDuration(dayData.schoolStart, dayData.schoolEnd),
                                category: 'schedule',
                                priority: 'high',
                                isRecurring: true,
                                dayOfWeek: dayName,
                                type: 'school',
                                description: 'Ders saati - PlanIQ tarafÄ±ndan otomatik oluÅŸturuldu'
                            });
                        }
                        
                        // Mesai saatleri
                        if (purposes.includes('work') && dayData.workStart && dayData.workEnd) {
                            tasks.push({
                                id: `schedule-work-${dayKey}-${i}`,
                                name: 'Mesai',
                                time: dayData.workStart,
                                duration: calculateDuration(dayData.workStart, dayData.workEnd),
                                category: 'schedule',
                                priority: 'high',
                                isRecurring: true,
                                dayOfWeek: dayName,
                                type: 'work',
                                description: 'Mesai saati - PlanIQ tarafÄ±ndan otomatik oluÅŸturuldu'
                            });
                        }
                    }
                }
                
                return tasks;
            };
            
            // Saat farkÄ±nÄ± hesapla (dakika cinsinden)
            const calculateDuration = (startTime, endTime) => {
                const start = new Date(`2000-01-01T${startTime}`);
                const end = new Date(`2000-01-01T${endTime}`);
                const diffMs = end - start;
                return Math.round(diffMs / (1000 * 60)); // dakika cinsinden
            };
            
            const goToPreviousDay = () => {
                setSelectedDate(prevDate => {
                    const newDate = new Date(prevDate);
                    newDate.setDate(prevDate.getDate() - 1);
                    return newDate;
                });
            };
            
            const goToNextDay = () => {
                setSelectedDate(prevDate => {
                    const newDate = new Date(prevDate);
                    newDate.setDate(prevDate.getDate() + 1);
                    return newDate;
                });
            };
            
            const goToToday = () => {
                setSelectedDate(new Date());
            };
            
            if (isSplashVisible) {
                return React.createElement(SplashScreen);
            }
            
            if (!userData) {
                return React.createElement(Onboarding, { onComplete: handleOnboardingComplete });
            }
            
            if (currentPage === 'profile') {
                return React.createElement(ProfilePage, { 
                    userData, 
                    onBack: () => setCurrentPage('main'),
                    onEdit: (newData) => setUserData(newData)
                });
            }
            
            const selectedDateKey = formatDateKey(selectedDate);
            const displayDate = formatDisplayDate(selectedDate);
            
            return React.createElement('div', {
                className: `min-h-screen ${isDark ? 'bg-gray-900 text-white' : 'bg-gray-100 text-gray-900'} transition-colors duration-300`
            }, [
                // Header
                React.createElement('header', {
                    key: 'header',
                    className: `${isDark ? 'bg-gray-900/80' : 'bg-white/80'} backdrop-blur-md shadow-sm sticky top-0 z-40`
                }, React.createElement('div', {
                    className: "max-w-6xl mx-auto px-4 py-4 flex justify-between items-center"
                }, [
                    React.createElement('div', {
                        key: 'logo',
                        className: "flex items-center gap-2 cursor-pointer",
                        onClick: () => setCurrentPage('main')
                    }, [
                        React.createElement('div', { key: 'brain', className: `w-8 h-8 ${isDark ? 'text-purple-400' : 'text-purple-600'}` }, 'ğŸ§ '),
                        React.createElement('h1', { key: 'title', className: "text-2xl font-bold" }, [
                            'Plan',
                            React.createElement('span', { key: 'iq', className: isDark ? 'text-yellow-300' : 'text-purple-600' }, 'IQ')
                        ])
                    ]),
                    React.createElement('div', { key: 'controls', className: "flex items-center gap-4" }, [
                        React.createElement('span', { key: 'welcome', className: "font-medium hidden sm:block" }, `HoÅŸ geldin, ${userData.name}!`),
                        React.createElement('button', {
                            key: 'profile',
                            onClick: () => setCurrentPage('profile'),
                            className: `p-2 rounded-xl transition-all hover:scale-105 ${isDark ? 'bg-gray-800 hover:bg-gray-700 text-white' : 'bg-gray-100 hover:bg-gray-200 text-gray-700'}`,
                            title: "Profil"
                        }, 'ğŸ‘¤'),
                        React.createElement('button', {
                            key: 'reset',
                            onClick: resetToOnboarding,
                            className: `p-2 rounded-xl transition-all hover:scale-105 ${isDark ? 'bg-red-800 hover:bg-red-700 text-white' : 'bg-red-100 hover:bg-red-200 text-red-700'}`,
                            title: "Ã‡Ä±kÄ±ÅŸ Yap / Onboarding'e DÃ¶n"
                        }, 'ğŸšª'),
                        React.createElement('button', {
                            key: 'theme',
                            onClick: () => setIsDark(!isDark),
                            className: `p-2 rounded-full ${isDark ? 'bg-gray-700 hover:bg-gray-600' : 'bg-gray-200 hover:bg-gray-300'} transition-colors`,
                            'aria-label': "TemayÄ± DeÄŸiÅŸtir"
                        }, isDark ? 'â˜€ï¸' : 'ğŸŒ™')
                    ])
                ])),
                
                // Main Content
                React.createElement('main', {
                    key: 'main',
                    className: "max-w-3xl mx-auto p-4 md:p-8"
                }, [
                    // Calendar Navigation
                    React.createElement('div', {
                        key: 'calendar',
                        className: "flex items-center justify-between mb-6 bg-white/50 dark:bg-gray-800/50 p-4 rounded-xl shadow animate-slideUp"
                    }, [
                        React.createElement('button', {
                            key: 'prev',
                            onClick: goToPreviousDay,
                            className: `p-2 rounded-full ${isDark ? 'hover:bg-gray-700' : 'hover:bg-gray-200'} transition-colors`,
                            'aria-label': "Ã–nceki GÃ¼n"
                        }, 'â†'),
                        React.createElement('div', { key: 'date', className: "text-center" }, [
                            React.createElement('h2', { key: 'day', className: "text-2xl font-bold" }, displayDate),
                            displayDate !== "BugÃ¼n" && React.createElement('button', {
                                key: 'today',
                                onClick: goToToday,
                                className: `text-xs mt-1 ${isDark ? 'text-purple-300 hover:text-purple-200' : 'text-purple-600 hover:text-purple-700'} font-semibold`
                            }, 'BugÃ¼ne Git')
                        ]),
                        React.createElement('button', {
                            key: 'next',
                            onClick: goToNextDay,
                            className: `p-2 rounded-full ${isDark ? 'hover:bg-gray-700' : 'hover:bg-gray-200'} transition-colors`,
                            'aria-label': "Sonraki GÃ¼n"
                        }, 'â†’')
                    ]),
                    
                    // Daily Plan Card
                    React.createElement('div', {
                        key: 'planCard',
                        className: "animate-slideUp"
                    }, React.createElement(DailyPlanCard, {
                        day: displayDate,
                        userData: userData,
                        selectedDateKey: selectedDateKey,
                        userId: userId,
                        isDark: isDark
                    }))
                ])
            ]);
        };
        
        // Render App
        try {
            console.log('PlanIQ uygulamasÄ± baÅŸlatÄ±lÄ±yor...');
            ReactDOM.render(React.createElement(App), document.getElementById('root'));
            console.log('PlanIQ uygulamasÄ± baÅŸarÄ±yla yÃ¼klendi!');
        } catch (error) {
            console.error('PlanIQ yÃ¼kleme hatasÄ±:', error);
            document.getElementById('root').innerHTML = `
                <div style="padding: 20px; text-align: center; font-family: Arial;">
                    <h2>PlanIQ YÃ¼kleme HatasÄ±</h2>
                    <p>Bir hata oluÅŸtu: ${error.message}</p>
                    <p>LÃ¼tfen sayfayÄ± yenileyin veya geliÅŸtirici konsolunu kontrol edin.</p>
                </div>
            `;
        }
    </script>
</body>
</html>